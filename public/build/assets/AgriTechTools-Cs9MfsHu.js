import{al as ge,i as E,N as z,r as y,G as me,q as ie,c as G,y as le,h as b,z as Z,j as q,w as u,g as t,d as n,u as U,t as P,B as se,D as oe,b as H,f as B,l as $,o as he,a0 as ve,F as fe}from"./_plugin-vue_export-helper-P2oMpLHC.js";import{H as be}from"./Header-DnccJWzx.js";import{l as k,u as ne,a as _e}from"./admin-BCf9wiO0.js";import{T as S,a as ye}from"./TranslationField-ZQtRfAhG.js";/* empty css                                                               *//* empty css              */let re=ge("AgriTechToolsRepository",{state(){return{isEditMode:y(!1),router:me(),search:y(""),loadingTable:y(!0),loading:y(!0),totalItems:y(0),selectedItems:y([]),itemsPerPage:y(5),createDialog:y(!1),agriTechTools:z([]),agriTechToolsSearch:y(""),currentAgriTechTool:z({}),statusOptions:z([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"available",label:"Available"},{value:"unavailable",label:"Unavailable"},{value:"maintenance",label:"Maintenance"}]),toolTypeOptions:z([{value:"mobile_app",label:"Mobile App"},{value:"web_platform",label:"Web Platform"},{value:"hardware",label:"Hardware"},{value:"software",label:"Software"},{value:"sensor",label:"Sensor"}]),technologyLevelOptions:z([{value:"basic",label:"Basic"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"cutting_edge",label:"Cutting Edge"}]),availabilityOptions:z([{value:"available",label:"Available"},{value:"limited",label:"Limited"},{value:"unavailable",label:"Unavailable"},{value:"coming_soon",label:"Coming Soon"}])}},actions:{setEditMode(h){this.isEditMode=h},getTodaysDate(){const h=new Date,s=h.getFullYear(),o=String(h.getMonth()+1).padStart(2,"0"),r=String(h.getDate()).padStart(2,"0");return`${s}-${o}-${r}`},async fetchAgriTechTools({page:h=1,itemsPerPage:s=5,status:o=""}){this.loading=!0;try{const r=new URLSearchParams({page:h,perPage:s,search:this.agriTechToolsSearch});o&&r.append("status",o);const O=await E.get(`agri-tech-tools?${r}`);console.log("API Response:",O.data),O.data.success?(this.agriTechTools=O.data.data||[],this.totalItems=O.data.meta?.total||0):(this.agriTechTools=[],this.totalItems=0,k.error(O.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(r){console.error("API Error:",r),console.error("Error Response:",r.response?.data),this.agriTechTools=[],this.totalItems=0,this.loading=!1;const O=r.response?.data?.message||"Failed to fetch agri-tech tools";k.error(O,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchAgriTechTool(h){this.loading=!0;try{const s=await E.get(`agri-tech-tools/${h}`,{params:{include_translations:1}});this.currentAgriTechTool=s.data.data,this.loading=!1}catch(s){console.error(s),this.loading=!1,k.error("Failed to fetch agri-tech tool",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createAgriTechTool(h){try{const s=await E.post("agri-tech-tools",h);this.createDialog=!1,k.success("Agri-tech tool created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchAgriTechTools({page:1,itemsPerPage:this.itemsPerPage})}catch(s){console.error(s);const o=s.response?.data?.message||"Failed to create agri-tech tool. Please try again.";k.error(o,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateAgriTechTool(h,s){try{const o=await E.post(`agri-tech-tools/${h}`,s,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,k.success("Agri-tech tool updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchAgriTechTools({page:1,itemsPerPage:this.itemsPerPage}),o}catch(o){console.error(o);const r=o.response?.data?.message||"Failed to update agri-tech tool. Please try again.";throw k.error(r,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),o}},async deleteAgriTechTool(h){try{await E.delete(`agri-tech-tools/${h}`),k.success("Agri-tech tool deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchAgriTechTools({page:1,itemsPerPage:this.itemsPerPage})}catch(s){console.error(s);const o=s.response?.data?.message||"Failed to delete agri-tech tool. Please try again.";k.error(o,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteAgriTechTools(h){try{const s=h.map(o=>E.delete(`agri-tech-tools/${o}`));await Promise.all(s),k.success(`${h.length} agri-tech tools deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchAgriTechTools({page:1,itemsPerPage:this.itemsPerPage})}catch(s){console.error(s),k.error("Failed to delete selected agri-tech tools. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(h){try{const s=await E.post(`agri-tech-tools/${h}/toggle-status`);k.success("Agri-tech tool status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchAgriTechTools({page:1,itemsPerPage:this.itemsPerPage})}catch(s){console.error(s);const o=s.response?.data?.message||"Failed to update agri-tech tool status. Please try again.";k.error(o,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedAgriTechTools({page:h=1,itemsPerPage:s=10}){try{const o=new URLSearchParams({page:h,perPage:s,search:this.agriTechToolsSearch});return(await E.get(`agri-tech-tools/published?${o}`)).data}catch(o){return console.error(o),{success:!1,data:[],meta:{total:0}}}},getStatusLabel(h){const s=this.statusOptions.find(o=>o.value===h);return s?s.label:h},formatDate(h){return h?new Date(h).toLocaleDateString():""},resetCurrentAgriTechTool(){this.currentAgriTechTool={id:null,name:"",slug:"",description:"",short_description:"",category:"sensors",technology_level:"basic",features:"",specifications:"",usage_instructions:"",maintenance_requirements:"",availability:"available",price_range:"",supplier:"",contact_info:"",cover_image:"",thumbnail_image:"",status:"draft"}}}});const Ve={class:"flex w-100"},$e={class:"flex w-100"},Ce={class:"flex w-100"},Ue={class:"flex w-100"},Pe={class:"flex w-100"},Te={class:"flex w-100 image-upload-row mb-4"},Ae={class:"w-50 image-upload-wrapper"},we={class:"image-upload-label mb-3 d-block"},ke={class:"photo-upload-container"},Oe=["src"],Ie={class:"photo-overlay"},Se={class:"w-50 image-upload-wrapper"},qe={class:"image-upload-label mb-3 d-block"},Me={class:"photo-upload-container"},Be=["src"],Ee={class:"photo-overlay"},Le={class:"w-100"},Re={class:"w-100"},je={class:"w-100"},ze={class:"w-100"},He={class:"w-100"},Fe={class:"w-100"},Ne={class:"translation-field mb-4"},Je={class:"translation-field mb-4"},We={__name:"CreateAgriTechToolTranslatable",setup(h){const{t:s}=ne(),o=re(),r=G(()=>o.isEditMode?s("update"):s("create")),O=G(()=>o.isEditMode?s("update"):s("submit")),F=y(!1),D=["name","short_description","description","features","specifications","usage_instructions","maintenance_requirements"],l=z({id:null,name:"",slug:"",description:"",short_description:"",tool_type:"mobile_app",technology_level:"basic",features:[],specifications:"",usage_instructions:"",maintenance_requirements:"",availability:"available",price_range:"",supplier:"",contact_info:"",cover_image:"",thumbnail_image:"",status:"draft"}),T=y(null),C=y(null),N=y(null),K=y(null),A=y(null),I=y(null),J=y(null),Q=y(null),L=G(()=>C.value||l.cover_image||null),R=G(()=>I.value||l.thumbnail_image||null);le(T,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(s("please_select_image")||"Please select a valid image file"),T.value=null,C.value=null;return}if(e.size>3*1024*1024){alert(s("image_too_large")||"Image size must be less than 3MB"),T.value=null,C.value=null;return}l.cover_image="";const V=new FileReader;V.onload=w=>{C.value=w.target.result},V.onerror=()=>{console.error("Error reading file"),C.value=null},V.readAsDataURL(e)}else e||l.cover_image||(C.value=null)}),le(A,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(s("please_select_image")||"Please select a valid image file"),A.value=null,I.value=null;return}if(e.size>3*1024*1024){alert(s("image_too_large")||"Image size must be less than 3MB"),A.value=null,I.value=null;return}l.thumbnail_image="";const V=new FileReader;V.onload=w=>{I.value=w.target.result},V.onerror=()=>{console.error("Error reading file"),I.value=null},V.readAsDataURL(e)}else e||l.thumbnail_image||(I.value=null)}),le(()=>o.currentAgriTechTool,e=>{if(e&&Object.keys(e).length>0){if(l.id=e.id,l.name=e.name||"",l.slug=e.slug||"",l.description=e.description||"",l.short_description=e.short_description||"",l.tool_type=e.tool_type||"mobile_app",l.technology_level=e.technology_level||"basic",e.features)if(typeof e.features=="string")try{l.features=JSON.parse(e.features)}catch{l.features=e.features.split(",").map(d=>d.trim()).filter(Boolean)}else Array.isArray(e.features)?l.features=e.features:l.features=[];else l.features=[];l.specifications=e.specifications||"",l.usage_instructions=e.usage_instructions||"",l.maintenance_requirements=e.maintenance_requirements||"",l.availability=e.availability||"available",l.price_range=e.price_range||"",l.supplier=e.supplier||"",l.contact_info=e.contact_info||"",l.cover_image=e.cover_image||"",l.thumbnail_image=e.thumbnail_image||"",l.status=e.status||"draft",T.value=null,C.value=l.cover_image||null,K.value=l.cover_image||null,A.value=null,I.value=l.thumbnail_image||null,Q.value=l.thumbnail_image||null,l.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}}}},{deep:!0,immediate:!0});const Y={required:e=>!!e||s("field_required")},x=()=>{l.name&&!l.slug&&(l.slug=l.name.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},X=()=>{N.value?.click()},ee=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(T.value=e.target.files[0])},ae=()=>{T.value=null,C.value=null,l.cover_image="",N.value&&(N.value.value="")},c=()=>{J.value?.click()},f=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(A.value=e.target.files[0])},M=()=>{A.value=null,I.value=null,l.thumbnail_image="",J.value&&(J.value.value="")},te=async({data:e})=>{F.value=!0;try{const d=new FormData,V=p=>{if(Array.isArray(p))return p;if(typeof p=="string")try{const g=JSON.parse(p);return Array.isArray(g)?g:[]}catch{return p.split(",").map(g=>g.trim()).filter(Boolean)}return[]},w=V(l.features||e.features||[]);if(Object.keys(e).forEach(p=>{if(p!=="cover_image"&&p!=="thumbnail_image"&&p!=="features")if(p==="translations"){const g={...e[p]};g.farsi&&g.farsi.features&&(g.farsi.features=V(g.farsi.features)),g.pashto&&g.pashto.features&&(g.pashto.features=V(g.pashto.features)),d.append(p,JSON.stringify(g))}else e[p]!==null&&e[p]!==void 0&&d.append(p,e[p])}),w&&w.length>0?w.forEach((p,g)=>{d.append(`features[${g}]`,p)}):o.isEditMode&&d.append("features[]",""),T.value?d.append("cover_image",T.value):o.isEditMode&&!C.value&&!T.value&&K.value?d.append("cover_image",""):l.cover_image&&!l.cover_image.startsWith("data:")&&!T.value?d.append("cover_image",l.cover_image):o.isEditMode||d.append("cover_image",""),A.value?d.append("thumbnail_image",A.value):o.isEditMode&&!I.value&&!A.value&&Q.value?d.append("thumbnail_image",""):l.thumbnail_image&&!l.thumbnail_image.startsWith("data:")&&!A.value?d.append("thumbnail_image",l.thumbnail_image):o.isEditMode||d.append("thumbnail_image",""),o.isEditMode){const p=await o.updateAgriTechTool(l.id,d),g=p?.data?.data||p?.data||{};T.value&&g.cover_image&&(l.cover_image=g.cover_image,C.value=g.cover_image,T.value=null),A.value&&g.thumbnail_image&&(l.thumbnail_image=g.thumbnail_image,I.value=g.thumbnail_image,A.value=null)}else await o.createAgriTechTool(d)}finally{F.value=!1}};return(e,d)=>{const V=b("v-text-field"),w=b("v-select"),p=b("v-icon"),g=b("v-textarea"),j=b("v-combobox");return q(),Z(ye,{modelValue:U(o).createDialog,"onUpdate:modelValue":d[0]||(d[0]=a=>U(o).createDialog=a),"form-title":r.value,"button-text":O.value,"translatable-fields":D,"form-data":l,rules:Y,saving:F.value,"is-edit-mode":U(o).isEditMode,onSave:te},{"base-fields":u(({formData:a,rules:_})=>[n("div",Ve,[t(V,{modelValue:a.name,"onUpdate:modelValue":i=>a.name=i,variant:"outlined",label:e.$t("name"),density:"compact",class:"pb-4 pr-2 w-75",rules:[_.required],onInput:x},null,8,["modelValue","onUpdate:modelValue","label","rules"]),t(w,{modelValue:a.status,"onUpdate:modelValue":i=>a.status=i,items:U(o).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),n("div",$e,[t(V,{modelValue:a.slug,"onUpdate:modelValue":i=>a.slug=i,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly_name"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),t(w,{modelValue:a.tool_type,"onUpdate:modelValue":i=>a.tool_type=i,items:U(o).toolTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("tool_type"),class:"pb-4 pl-2 w-50",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),n("div",Ce,[t(w,{modelValue:a.technology_level,"onUpdate:modelValue":i=>a.technology_level=i,items:U(o).technologyLevelOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("technology_level"),class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","items","label"]),t(w,{modelValue:a.availability,"onUpdate:modelValue":i=>a.availability=i,items:U(o).availabilityOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("availability"),class:"pb-4 pl-2 w-50",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),n("div",Ue,[t(V,{modelValue:a.price_range,"onUpdate:modelValue":i=>a.price_range=i,variant:"outlined",label:e.$t("price_range"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_price_range"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),t(V,{modelValue:a.supplier,"onUpdate:modelValue":i=>a.supplier=i,variant:"outlined",label:e.$t("supplier"),density:"compact",class:"pb-4 pl-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"])]),n("div",Pe,[t(V,{modelValue:a.contact_info,"onUpdate:modelValue":i=>a.contact_info=i,variant:"outlined",label:e.$t("contact_info"),density:"compact",class:"pb-4 w-100"},null,8,["modelValue","onUpdate:modelValue","label"])]),n("div",Te,[n("div",Ae,[n("label",we,P(e.$t("cover_image")),1),n("div",ke,[n("input",{ref_key:"coverImageInputRef",ref:N,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:ee},null,544),se(n("img",{src:L.value,class:"photo-preview"},null,8,Oe),[[oe,L.value!==null]]),n("div",Ie,[L.value?B("",!0):(q(),H("button",{key:0,type:"button",onClick:X,class:"overlay-button"},[t(p,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...d[1]||(d[1]=[$("mdi-camera",-1)])]),_:1})])),L.value?(q(),H("button",{key:1,type:"button",onClick:ae,class:"close-button"},[t(p,{size:"lg",color:"red"},{default:u(()=>[...d[2]||(d[2]=[$("mdi-close",-1)])]),_:1})])):B("",!0),L.value?(q(),H("button",{key:2,type:"button",onClick:X,class:"edit-button"},[t(p,{size:"small"},{default:u(()=>[...d[3]||(d[3]=[$("mdi-pencil",-1)])]),_:1})])):B("",!0)])])]),n("div",Se,[n("label",qe,P(e.$t("thumbnail_image")),1),n("div",Me,[n("input",{ref_key:"thumbnailImageInputRef",ref:J,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:f},null,544),se(n("img",{src:R.value,class:"photo-preview"},null,8,Be),[[oe,R.value!==null]]),n("div",Ee,[R.value?B("",!0):(q(),H("button",{key:0,type:"button",onClick:c,class:"overlay-button"},[t(p,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...d[4]||(d[4]=[$("mdi-camera",-1)])]),_:1})])),R.value?(q(),H("button",{key:1,type:"button",onClick:M,class:"close-button"},[t(p,{size:"lg",color:"red"},{default:u(()=>[...d[5]||(d[5]=[$("mdi-close",-1)])]),_:1})])):B("",!0),R.value?(q(),H("button",{key:2,type:"button",onClick:c,class:"edit-button"},[t(p,{size:"small"},{default:u(()=>[...d[6]||(d[6]=[$("mdi-pencil",-1)])]),_:1})])):B("",!0)])])])]),n("div",Le,[t(g,{modelValue:a.short_description,"onUpdate:modelValue":i=>a.short_description=i,variant:"outlined",label:e.$t("short_description"),density:"compact",class:"pb-4",rows:"3",hint:e.$t("hint_agri_tool_description"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),n("div",Re,[t(g,{modelValue:a.description,"onUpdate:modelValue":i=>a.description=i,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[_.required],rows:"6",hint:e.$t("hint_agri_tool_detailed"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])]),n("div",je,[t(j,{modelValue:a.features,"onUpdate:modelValue":i=>a.features=i,variant:"outlined",label:e.$t("features"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_features"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),n("div",ze,[t(g,{modelValue:a.specifications,"onUpdate:modelValue":i=>a.specifications=i,variant:"outlined",label:e.$t("specifications"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_specifications"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),n("div",He,[t(g,{modelValue:a.usage_instructions,"onUpdate:modelValue":i=>a.usage_instructions=i,variant:"outlined",label:e.$t("usage_instructions"),density:"compact",class:"pb-4",rows:"6",hint:e.$t("hint_usage_instructions"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),n("div",Fe,[t(g,{modelValue:a.maintenance_requirements,"onUpdate:modelValue":i=>a.maintenance_requirements=i,variant:"outlined",label:e.$t("maintenance_requirements"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_maintenance"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"farsi-fields":u(({translations:a,clearTranslation:_,hasTranslation:i})=>[t(S,{modelValue:a.name,"onUpdate:modelValue":v=>a.name=v,"field-name":"name","field-label":e.$t("name"),language:"farsi","language-label":e.$t("dari"),"has-translation":i("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.short_description,"onUpdate:modelValue":v=>a.short_description=v,"field-name":"short_description","field-label":e.$t("short_description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:3,"has-translation":i("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.description,"onUpdate:modelValue":v=>a.description=v,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":i("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),n("div",Ne,[t(j,{modelValue:a.features,"onUpdate:modelValue":v=>a.features=v,variant:"outlined",label:e.$t("features"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_features"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),t(S,{modelValue:a.specifications,"onUpdate:modelValue":v=>a.specifications=v,"field-name":"specifications","field-label":e.$t("specifications"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":i("specifications"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.usage_instructions,"onUpdate:modelValue":v=>a.usage_instructions=v,"field-name":"usage_instructions","field-label":e.$t("usage_instructions"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":i("usage_instructions"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.maintenance_requirements,"onUpdate:modelValue":v=>a.maintenance_requirements=v,"field-name":"maintenance_requirements","field-label":e.$t("maintenance_requirements"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":i("maintenance_requirements"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),"pashto-fields":u(({translations:a,clearTranslation:_,hasTranslation:i})=>[t(S,{modelValue:a.name,"onUpdate:modelValue":v=>a.name=v,"field-name":"name","field-label":e.$t("name"),language:"pashto","language-label":e.$t("pashto"),"has-translation":i("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.short_description,"onUpdate:modelValue":v=>a.short_description=v,"field-name":"short_description","field-label":e.$t("short_description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:3,"has-translation":i("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.description,"onUpdate:modelValue":v=>a.description=v,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":i("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),n("div",Je,[t(j,{modelValue:a.features,"onUpdate:modelValue":v=>a.features=v,variant:"outlined",label:e.$t("features"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_features"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),t(S,{modelValue:a.specifications,"onUpdate:modelValue":v=>a.specifications=v,"field-name":"specifications","field-label":e.$t("specifications"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":i("specifications"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.usage_instructions,"onUpdate:modelValue":v=>a.usage_instructions=v,"field-name":"usage_instructions","field-label":e.$t("usage_instructions"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":i("usage_instructions"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(S,{modelValue:a.maintenance_requirements,"onUpdate:modelValue":v=>a.maintenance_requirements=v,"field-name":"maintenance_requirements","field-label":e.$t("maintenance_requirements"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":i("maintenance_requirements"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Ge=ie(We,[["__scopeId","data-v-7bb73162"]]),Ye=["dir"],De={class:"btn-search pt-12 pb-6"},Ke={class:"text-field w-25"},Qe={class:"btn flex"},Xe={class:"table-section"},Ze={class:"text-center pa-4"},xe={class:"py-2 pl-4"},ea={class:"d-flex align-center"},aa={class:"font-weight-medium"},ta={class:"text-caption text-grey"},la={class:"py-2 pl-4"},sa={class:"py-2 pl-4"},oa={class:"py-2 pl-4"},ia={class:"py-2 pl-4"},na={class:"py-2 pl-4"},ra={__name:"AgriTechTools",setup(h){const{t:s,locale:o}=ne();_e();const r=re(),O=G(()=>["fa","pa"].includes(o.value)?"rtl":"ltr"),F=y("");let D;const l=()=>{clearTimeout(D),D=setTimeout(()=>{r.fetchAgriTechTools({page:1,itemsPerPage:r.itemsPerPage,status:F.value})},500)},T=c=>{r.fetchAgriTechTools({page:c.page,itemsPerPage:c.itemsPerPage,status:F.value})},C=y([]),N=()=>{C.value.length>0&&(r.bulkDeleteAgriTechTools(C.value),C.value=[])},K=()=>{r.resetCurrentAgriTechTool(),r.isEditMode=!1,r.createDialog=!0},A=c=>{r.isEditMode=!0,r.currentAgriTechTool={...c},r.createDialog=!0},I=async c=>{await r.deleteAgriTechTool(c.id)},J=async c=>{await r.toggleStatus(c.id)},Q=c=>{switch(c){case"published":return"success";case"draft":return"warning";case"available":return"success";case"unavailable":return"error";case"maintenance":return"warning";default:return"primary"}},L=c=>{switch(c){case"available":return"success";case"limited":return"warning";case"unavailable":return"error";case"coming_soon":return"info";default:return"primary"}},R=c=>{switch(c){case"basic":return"success";case"intermediate":return"warning";case"advanced":return"orange";case"cutting_edge":return"error";default:return"primary"}},Y=c=>c?c.split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"N/A",x=c=>{const f=r.toolTypeOptions?.find(M=>M.value===c);return f?f.label:Y(c)},X=c=>{const f=r.technologyLevelOptions?.find(M=>M.value===c);return f?f.label:Y(c)},ee=c=>{const f=r.availabilityOptions?.find(M=>M.value===c);return f?f.label:Y(c)},ae=G(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:s("name"),key:"name",align:"start",sortable:!0},{title:s("category"),key:"category",align:"center",sortable:!0},{title:s("technology_level"),key:"technology_level",align:"center",sortable:!0},{title:s("status"),key:"status",align:"center",sortable:!0},{title:s("availability"),key:"availability",align:"center",sortable:!0},{title:s("price_range"),key:"price_range",align:"center",sortable:!0},{title:s("action"),key:"action",align:"center",sortable:!1}]);return he(()=>{r.fetchAgriTechTools({page:1,itemsPerPage:r.itemsPerPage})}),(c,f)=>{const M=b("v-divider"),te=b("v-text-field"),e=b("v-btn"),d=b("v-icon"),V=b("v-img"),w=b("v-avatar"),p=b("v-chip"),g=b("v-checkbox"),j=b("v-list-item-title"),a=b("v-list-item"),_=b("v-list"),i=b("v-menu"),v=b("v-data-table-server"),ue=b("v-col"),de=b("v-row"),ce=b("v-main"),pe=b("v-app");return q(),H(fe,null,[U(r).createDialog?(q(),Z(Ge,{key:0})):B("",!0),n("div",{dir:O.value},[t(be,{pageTitle:c.$t("agri_tech_tools_management")},null,8,["pageTitle"]),t(M,{thickness:1,class:"border-opacity-100"}),n("div",De,[n("div",Ke,[t(te,{color:"primary",density:"compact",variant:"outlined",label:c.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:U(r).agriTechToolsSearch,"onUpdate:modelValue":f[0]||(f[0]=m=>U(r).agriTechToolsSearch=m),onInput:l},null,8,["label","modelValue"])]),n("div",Qe,[t(e,{variant:"outlined",color:"primary",class:"px-6"},{default:u(()=>[$(P(U(s)("filter")),1)]),_:1}),f[4]||(f[4]=$(" Â  ",-1)),t(e,{onClick:K,class:"create-btn-gradient px-6",text:c.$t("create")},{default:u(()=>[t(d,null,{default:u(()=>[...f[3]||(f[3]=[$("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),n("div",Xe,[t(pe,null,{default:u(()=>[t(ce,{class:"main"},{default:u(()=>[t(de,null,{default:u(()=>[t(ue,null,{default:u(()=>[t(v,{dir:O.value,theme:"cursor-pointer","items-per-page":U(r).itemsPerPage,"onUpdate:itemsPerPage":f[2]||(f[2]=m=>U(r).itemsPerPage=m),headers:ae.value,"items-length":U(r).totalItems,items:U(r).agriTechTools,loading:U(r).loading,"onUpdate:options":T,hover:"",class:"w-100 mx-auto"},{"no-data":u(()=>[n("div",Ze,P(c.$t("no_data_available")),1)]),"item.name":u(({item:m})=>[n("td",xe,[n("div",ea,[m.cover_image?(q(),Z(w,{key:0,size:"40",class:"mr-3"},{default:u(()=>[t(V,{src:m.cover_image,alt:m.name},null,8,["src","alt"])]),_:2},1024)):B("",!0),n("div",null,[n("div",aa,P(m.name),1),n("div",ta,P(m.category),1)])])])]),"item.category":u(({item:m})=>[n("td",la,[t(p,{color:"primary",size:"small",variant:"outlined"},{default:u(()=>[$(P(x(m.category)),1)]),_:2},1024)])]),"item.technology_level":u(({item:m})=>[n("td",sa,[t(p,{color:R(m.technology_level),size:"small",variant:"flat"},{default:u(()=>[$(P(X(m.technology_level)),1)]),_:2},1032,["color"])])]),"item.status":u(({item:m})=>[n("td",oa,[t(p,{color:Q(m.status),size:"small",variant:"flat"},{default:u(()=>[$(P(U(r).getStatusLabel(m.status)),1)]),_:2},1032,["color"])])]),"item.availability":u(({item:m})=>[n("td",ia,[t(p,{color:L(m.availability),size:"small",variant:"flat"},{default:u(()=>[$(P(ee(m.availability)),1)]),_:2},1032,["color"])])]),"item.price_range":u(({item:m})=>[n("td",na,[n("span",null,P(m.price_range||"N/A"),1)])]),"item.checkbox":u(({item:m})=>[t(g,{value:m.id,modelValue:C.value,"onUpdate:modelValue":f[1]||(f[1]=W=>C.value=W),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":u(({item:m})=>[t(i,null,{activator:u(({props:W})=>[t(e,ve({icon:"mdi-dots-vertical"},W,{variant:"text"}),null,16)]),default:u(()=>[t(_,null,{default:u(()=>[t(a,null,{default:u(()=>[t(j,{onClick:W=>A(m),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:u(()=>[t(d,{color:"tealColor"},{default:u(()=>[...f[5]||(f[5]=[$("mdi-square-edit-outline",-1)])]),_:1}),$(" "+P(c.$t("edit")),1)]),_:1},8,["onClick"]),t(j,{onClick:W=>J(m),class:"cursor-pointer d-flex gap-3 pb-3"},{default:u(()=>[t(d,{color:m.status==="published"?"orange":"green"},{default:u(()=>[$(P(m.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),$(" "+P(m.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),t(j,{class:"cursor-pointer d-flex gap-3",onClick:W=>I(m)},{default:u(()=>[t(d,{color:"error"},{default:u(()=>[...f[6]||(f[6]=[$("mdi-delete-outline",-1)])]),_:1}),$(" "+P(c.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),C.value.length>0?(q(),Z(e,{key:0,class:"header-button",onClick:N,color:"#B71C1C",flat:"",inset:"",text:`Delete ${C.value.length} selected`},null,8,["text"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,Ye)],64)}}},ha=ie(ra,[["__scopeId","data-v-1341feca"]]);export{ha as default};
