import{al as re,i as E,N as W,r as h,G as ue,q as se,c as G,y as te,h as b,z as Z,j as I,w as d,g as l,d as r,u as v,t as U,B as le,D as ie,b as z,f as M,l as P,o as de,a0 as me,F as pe}from"./_plugin-vue_export-helper-P2oMpLHC.js";import{H as ge}from"./Header-DnccJWzx.js";import{l as F,u as oe,a as ce}from"./admin-BCf9wiO0.js";import{T as S,a as _e}from"./TranslationField-ZQtRfAhG.js";/* empty css                                                               *//* empty css              */let ne=re("SmartFarmingProgramsRepository",{state(){return{isEditMode:h(!1),router:ue(),search:h(""),loadingTable:h(!0),loading:h(!0),totalItems:h(0),selectedItems:h([]),itemsPerPage:h(5),createDialog:h(!1),smartFarmingPrograms:W([]),smartFarmingProgramsSearch:h(""),currentSmartFarmingProgram:W({}),statusOptions:W([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),farmingTypeOptions:W([{value:"organic",label:"Organic"},{value:"precision",label:"Precision"},{value:"sustainable",label:"Sustainable"},{value:"hydroponic",label:"Hydroponic"},{value:"vertical",label:"Vertical"},{value:"greenhouse",label:"Greenhouse"}]),targetCropsOptions:W([{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"corn",label:"Corn"},{value:"vegetables",label:"Vegetables"},{value:"fruits",label:"Fruits"},{value:"herbs",label:"Herbs"},{value:"legumes",label:"Legumes"}])}},actions:{setEditMode(g){this.isEditMode=g},getTodaysDate(){const g=new Date,i=g.getFullYear(),s=String(g.getMonth()+1).padStart(2,"0"),u=String(g.getDate()).padStart(2,"0");return`${i}-${s}-${u}`},async fetchSmartFarmingPrograms({page:g=1,itemsPerPage:i=5,status:s=""}){this.loading=!0;try{const u=new URLSearchParams({page:g,perPage:i,search:this.smartFarmingProgramsSearch});s&&u.append("status",s);const k=await E.get(`smart-farming-programs?${u}`);console.log("API Response:",k.data),k.data.success?(this.smartFarmingPrograms=k.data.data||[],this.totalItems=k.data.meta?.total||0):(this.smartFarmingPrograms=[],this.totalItems=0,F.error(k.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(u){console.error("API Error:",u),console.error("Error Response:",u.response?.data),this.smartFarmingPrograms=[],this.totalItems=0,this.loading=!1;const k=u.response?.data?.message||"Failed to fetch smart farming programs";F.error(k,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchSmartFarmingProgram(g){this.loading=!0;try{const i=await E.get(`smart-farming-programs/${g}`,{params:{include_translations:1}});this.currentSmartFarmingProgram=i.data.data,this.loading=!1}catch(i){console.error(i),this.loading=!1,F.error("Failed to fetch smart farming program",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createSmartFarmingProgram(g){try{const i=await E.post("smart-farming-programs",g);this.createDialog=!1,F.success("Smart farming program created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSmartFarmingPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(i){console.error(i);const s=i.response?.data?.message||"Failed to create smart farming program. Please try again.";F.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateSmartFarmingProgram(g,i){try{const s=await E.post(`smart-farming-programs/${g}`,i,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,F.success("Smart farming program updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSmartFarmingPrograms({page:1,itemsPerPage:this.itemsPerPage}),s}catch(s){console.error(s);const u=s.response?.data?.message||"Failed to update smart farming program. Please try again.";throw F.error(u,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s}},async deleteSmartFarmingProgram(g){try{await E.delete(`smart-farming-programs/${g}`),F.success("Smart farming program deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSmartFarmingPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(i){console.error(i);const s=i.response?.data?.message||"Failed to delete smart farming program. Please try again.";F.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteSmartFarmingPrograms(g){try{const i=g.map(s=>E.delete(`smart-farming-programs/${s}`));await Promise.all(i),F.success(`${g.length} smart farming programs deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSmartFarmingPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(i){console.error(i),F.error("Failed to delete selected smart farming programs. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(g){try{const i=await E.post(`smart-farming-programs/${g}/toggle-status`);F.success("Smart farming program status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSmartFarmingPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(i){console.error(i);const s=i.response?.data?.message||"Failed to update smart farming program status. Please try again.";F.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedSmartFarmingPrograms({page:g=1,itemsPerPage:i=10}){try{const s=new URLSearchParams({page:g,perPage:i,search:this.smartFarmingProgramsSearch});return(await E.get(`smart-farming-programs/published?${s}`)).data}catch(s){return console.error(s),{success:!1,data:[],meta:{total:0}}}},getStatusLabel(g){const i=this.statusOptions.find(s=>s.value===g);return i?i.label:g},formatDate(g){return g?new Date(g).toLocaleDateString():""},resetCurrentSmartFarmingProgram(){this.currentSmartFarmingProgram={id:null,name:"",slug:"",description:"",short_description:"",farming_type:"organic",target_crops:[],sustainability_level:null,implementation_guide:"",sustainability_impact:"",duration:"",location:"",application_deadline:null,cover_image:"",thumbnail_image:"",status:"draft"}}}});const be={class:"flex w-100"},he={class:"flex w-100"},fe={class:"flex w-100"},ve={class:"flex w-100"},ye={class:"flex w-100 image-upload-row mb-4"},Ve={class:"w-50 image-upload-wrapper"},Pe={class:"image-upload-label mb-3 d-block"},Ce={class:"photo-upload-container"},$e=["src"],Se={class:"photo-overlay"},Ue={class:"w-50 image-upload-wrapper"},Fe={class:"image-upload-label mb-3 d-block"},ke={class:"photo-upload-container"},we=["src"],Ie={class:"photo-overlay"},Oe={class:"w-100"},Me={class:"w-100"},Ee={class:"w-100"},Be={class:"w-100"},Re={class:"w-100"},He={class:"translation-field mb-4"},ze={class:"translation-field mb-4"},je={__name:"CreateSmartFarmingProgramTranslatable",setup(g){const{t:i}=oe(),s=ne(),u=G(()=>s.isEditMode?i("update"):i("create")),k=G(()=>s.isEditMode?i("update"):i("submit")),j=h(!1),Y=["name","short_description","description","farming_type","target_crops","location","implementation_guide","sustainability_impact"],o=W({id:null,name:"",slug:"",description:"",short_description:"",farming_type:"organic",target_crops:[],sustainability_level:null,implementation_guide:"",sustainability_impact:"",duration:"",location:"",application_deadline:null,cover_image:"",thumbnail_image:"",status:"draft"}),C=h(null),y=h(null),L=h(null),K=h(null),$=h(null),w=h(null),q=h(null),Q=h(null),B=G(()=>y.value||o.cover_image||null),R=G(()=>w.value||o.thumbnail_image||null);te(C,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(i("please_select_image")||"Please select a valid image file"),C.value=null,y.value=null;return}if(e.size>3*1024*1024){alert(i("image_too_large")||"Image size must be less than 3MB"),C.value=null,y.value=null;return}o.cover_image="";const p=new FileReader;p.onload=V=>{y.value=V.target.result},p.onerror=()=>{console.error("Error reading file"),y.value=null},p.readAsDataURL(e)}else e||o.cover_image||(y.value=null)}),te($,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(i("please_select_image")||"Please select a valid image file"),$.value=null,w.value=null;return}if(e.size>3*1024*1024){alert(i("image_too_large")||"Image size must be less than 3MB"),$.value=null,w.value=null;return}o.thumbnail_image="";const p=new FileReader;p.onload=V=>{w.value=V.target.result},p.onerror=()=>{console.error("Error reading file"),w.value=null},p.readAsDataURL(e)}else e||o.thumbnail_image||(w.value=null)}),te(()=>s.currentSmartFarmingProgram,e=>{e&&Object.keys(e).length>0&&(o.id=e.id,o.name=e.name||"",o.slug=e.slug||"",o.description=e.description||"",o.short_description=e.short_description||"",o.farming_type=e.farming_type||"organic",o.target_crops=e.target_crops||[],o.sustainability_level=e.sustainability_level||null,o.implementation_guide=e.implementation_guide||"",o.sustainability_impact=e.sustainability_impact||"",o.duration=e.duration||"",o.location=e.location||"",o.application_deadline=e.application_deadline?new Date(e.application_deadline).toISOString().slice(0,10):null,o.cover_image=e.cover_image||"",o.thumbnail_image=e.thumbnail_image||"",o.status=e.status||"draft",C.value=null,y.value=o.cover_image||null,K.value=o.cover_image||null,$.value=null,w.value=o.thumbnail_image||null,Q.value=o.thumbnail_image||null,o.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}})},{deep:!0,immediate:!0});const c={required:e=>!!e||i("field_required")},f=()=>{o.name&&!o.slug&&(o.slug=o.name.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},A=()=>{L.value?.click()},x=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(C.value=e.target.files[0])},T=()=>{C.value=null,y.value=null,o.cover_image="",L.value&&(L.value.value="")},H=()=>{q.value?.click()},ee=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&($.value=e.target.files[0])},ae=()=>{$.value=null,w.value=null,o.thumbnail_image="",q.value&&(q.value.value="")},X=async({data:e})=>{j.value=!0;try{const m=new FormData;if(Object.keys(e).forEach(p=>{p!=="cover_image"&&p!=="thumbnail_image"&&(p==="translations"?m.append(p,JSON.stringify(e[p])):p==="target_crops"&&Array.isArray(e[p])?e[p].forEach((V,O)=>{m.append(`${p}[${O}]`,V)}):e[p]!==null&&e[p]!==void 0&&m.append(p,e[p]))}),C.value?m.append("cover_image",C.value):s.isEditMode&&!y.value&&!C.value&&K.value?m.append("cover_image",""):o.cover_image&&!o.cover_image.startsWith("data:")&&!C.value?m.append("cover_image",o.cover_image):s.isEditMode||m.append("cover_image",""),$.value?m.append("thumbnail_image",$.value):s.isEditMode&&!w.value&&!$.value&&Q.value?m.append("thumbnail_image",""):o.thumbnail_image&&!o.thumbnail_image.startsWith("data:")&&!$.value?m.append("thumbnail_image",o.thumbnail_image):s.isEditMode||m.append("thumbnail_image",""),e.application_deadline&&m.set("application_deadline",new Date(e.application_deadline).toISOString().split("T")[0]),s.isEditMode){const p=await s.updateSmartFarmingProgram(o.id,m),V=p?.data?.data||p?.data||{};C.value&&V.cover_image&&(o.cover_image=V.cover_image,y.value=V.cover_image,C.value=null),$.value&&V.thumbnail_image&&(o.thumbnail_image=V.thumbnail_image,w.value=V.thumbnail_image,$.value=null)}else await s.createSmartFarmingProgram(m)}finally{j.value=!1}};return(e,m)=>{const p=b("v-text-field"),V=b("v-select"),O=b("v-icon"),J=b("v-combobox"),D=b("v-textarea");return I(),Z(_e,{modelValue:v(s).createDialog,"onUpdate:modelValue":m[0]||(m[0]=a=>v(s).createDialog=a),"form-title":u.value,"button-text":k.value,"translatable-fields":Y,"form-data":o,rules:c,saving:j.value,"is-edit-mode":v(s).isEditMode,onSave:X},{"base-fields":d(({formData:a,rules:_})=>[r("div",be,[l(p,{modelValue:a.name,"onUpdate:modelValue":n=>a.name=n,variant:"outlined",label:e.$t("name"),density:"compact",class:"pb-4 pr-2 w-75",rules:[_.required],onInput:f},null,8,["modelValue","onUpdate:modelValue","label","rules"]),l(V,{modelValue:a.status,"onUpdate:modelValue":n=>a.status=n,items:v(s).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),r("div",he,[l(p,{modelValue:a.slug,"onUpdate:modelValue":n=>a.slug=n,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly_name"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),l(V,{modelValue:a.farming_type,"onUpdate:modelValue":n=>a.farming_type=n,items:v(s).farmingTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("farming_type"),class:"pb-4 pl-2 w-50",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),r("div",fe,[l(p,{modelValue:a.sustainability_level,"onUpdate:modelValue":n=>a.sustainability_level=n,variant:"outlined",label:e.$t("sustainability_level"),density:"compact",type:"number",min:"0",max:"100",class:"pb-4 pr-2 w-50",hint:e.$t("hint_percentage"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),l(p,{modelValue:a.duration,"onUpdate:modelValue":n=>a.duration=n,variant:"outlined",label:e.$t("duration"),density:"compact",class:"pb-4 pl-2 w-50",hint:e.$t("hint_time_period"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",ve,[l(p,{modelValue:a.location,"onUpdate:modelValue":n=>a.location=n,variant:"outlined",label:e.$t("location"),density:"compact",class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"]),l(p,{modelValue:a.application_deadline,"onUpdate:modelValue":n=>a.application_deadline=n,variant:"outlined",label:e.$t("application_deadline"),density:"compact",type:"date",class:"pb-4 pl-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"])]),r("div",ye,[r("div",Ve,[r("label",Pe,U(e.$t("cover_image")),1),r("div",Ce,[r("input",{ref_key:"coverImageInputRef",ref:L,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:x},null,544),le(r("img",{src:B.value,class:"photo-preview"},null,8,$e),[[ie,B.value!==null]]),r("div",Se,[B.value?M("",!0):(I(),z("button",{key:0,type:"button",onClick:A,class:"overlay-button"},[l(O,{size:"x-large",color:"blue-grey-lighten-2"},{default:d(()=>[...m[1]||(m[1]=[P("mdi-camera",-1)])]),_:1})])),B.value?(I(),z("button",{key:1,type:"button",onClick:T,class:"close-button"},[l(O,{size:"lg",color:"red"},{default:d(()=>[...m[2]||(m[2]=[P("mdi-close",-1)])]),_:1})])):M("",!0),B.value?(I(),z("button",{key:2,type:"button",onClick:A,class:"edit-button"},[l(O,{size:"small"},{default:d(()=>[...m[3]||(m[3]=[P("mdi-pencil",-1)])]),_:1})])):M("",!0)])])]),r("div",Ue,[r("label",Fe,U(e.$t("thumbnail_image")),1),r("div",ke,[r("input",{ref_key:"thumbnailImageInputRef",ref:q,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:ee},null,544),le(r("img",{src:R.value,class:"photo-preview"},null,8,we),[[ie,R.value!==null]]),r("div",Ie,[R.value?M("",!0):(I(),z("button",{key:0,type:"button",onClick:H,class:"overlay-button"},[l(O,{size:"x-large",color:"blue-grey-lighten-2"},{default:d(()=>[...m[4]||(m[4]=[P("mdi-camera",-1)])]),_:1})])),R.value?(I(),z("button",{key:1,type:"button",onClick:ae,class:"close-button"},[l(O,{size:"lg",color:"red"},{default:d(()=>[...m[5]||(m[5]=[P("mdi-close",-1)])]),_:1})])):M("",!0),R.value?(I(),z("button",{key:2,type:"button",onClick:H,class:"edit-button"},[l(O,{size:"small"},{default:d(()=>[...m[6]||(m[6]=[P("mdi-pencil",-1)])]),_:1})])):M("",!0)])])])]),r("div",Oe,[l(J,{modelValue:a.target_crops,"onUpdate:modelValue":n=>a.target_crops=n,items:v(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),r("div",Me,[l(D,{modelValue:a.short_description,"onUpdate:modelValue":n=>a.short_description=n,variant:"outlined",label:e.$t("short_description"),density:"compact",class:"pb-4",rows:"3",hint:e.$t("hint_smart_farming_brief"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",Ee,[l(D,{modelValue:a.description,"onUpdate:modelValue":n=>a.description=n,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[_.required],rows:"6",hint:e.$t("hint_smart_farming_detailed"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])]),r("div",Be,[l(D,{modelValue:a.implementation_guide,"onUpdate:modelValue":n=>a.implementation_guide=n,variant:"outlined",label:e.$t("implementation_guide"),density:"compact",class:"pb-4",rows:"6",hint:e.$t("hint_implementation_guide"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",Re,[l(D,{modelValue:a.sustainability_impact,"onUpdate:modelValue":n=>a.sustainability_impact=n,variant:"outlined",label:e.$t("sustainability_impact"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_sustainability_benefits"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"farsi-fields":d(({translations:a,clearTranslation:_,hasTranslation:n})=>[l(S,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,"field-name":"name","field-label":e.$t("name"),language:"farsi","language-label":e.$t("dari"),"has-translation":n("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.short_description,"onUpdate:modelValue":t=>a.short_description=t,"field-name":"short_description","field-label":e.$t("short_description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:3,"has-translation":n("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.description,"onUpdate:modelValue":t=>a.description=t,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":n("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.farming_type,"onUpdate:modelValue":t=>a.farming_type=t,"field-name":"farming_type","field-label":e.$t("farming_type"),language:"farsi","language-label":e.$t("dari"),"has-translation":n("farming_type"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),r("div",He,[l(J,{modelValue:a.target_crops,"onUpdate:modelValue":t=>a.target_crops=t,items:v(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),l(S,{modelValue:a.location,"onUpdate:modelValue":t=>a.location=t,"field-name":"location","field-label":e.$t("location"),language:"farsi","language-label":e.$t("dari"),"has-translation":n("location"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.implementation_guide,"onUpdate:modelValue":t=>a.implementation_guide=t,"field-name":"implementation_guide","field-label":e.$t("implementation_guide"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":n("implementation_guide"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.sustainability_impact,"onUpdate:modelValue":t=>a.sustainability_impact=t,"field-name":"sustainability_impact","field-label":e.$t("sustainability_impact"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":n("sustainability_impact"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),"pashto-fields":d(({translations:a,clearTranslation:_,hasTranslation:n})=>[l(S,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,"field-name":"name","field-label":e.$t("name"),language:"pashto","language-label":e.$t("pashto"),"has-translation":n("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.short_description,"onUpdate:modelValue":t=>a.short_description=t,"field-name":"short_description","field-label":e.$t("short_description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:3,"has-translation":n("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.description,"onUpdate:modelValue":t=>a.description=t,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":n("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.farming_type,"onUpdate:modelValue":t=>a.farming_type=t,"field-name":"farming_type","field-label":e.$t("farming_type"),language:"pashto","language-label":e.$t("pashto"),"has-translation":n("farming_type"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),r("div",ze,[l(J,{modelValue:a.target_crops,"onUpdate:modelValue":t=>a.target_crops=t,items:v(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),l(S,{modelValue:a.location,"onUpdate:modelValue":t=>a.location=t,"field-name":"location","field-label":e.$t("location"),language:"pashto","language-label":e.$t("pashto"),"has-translation":n("location"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.implementation_guide,"onUpdate:modelValue":t=>a.implementation_guide=t,"field-name":"implementation_guide","field-label":e.$t("implementation_guide"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":n("implementation_guide"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(S,{modelValue:a.sustainability_impact,"onUpdate:modelValue":t=>a.sustainability_impact=t,"field-name":"sustainability_impact","field-label":e.$t("sustainability_impact"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":n("sustainability_impact"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Le=se(je,[["__scopeId","data-v-d43a5000"]]),qe=["dir"],Ae={class:"btn-search pt-12 pb-6"},Te={class:"text-field w-25"},De={class:"btn flex"},Ne={class:"table-section"},We={class:"text-center pa-4"},Ge={class:"py-2 pl-4"},Je={class:"d-flex align-center"},Ye={class:"font-weight-medium"},Ke={class:"text-caption text-grey"},Qe={class:"py-2 pl-4"},Xe={class:"py-2 pl-4"},Ze={class:"py-2 pl-4"},xe={class:"py-2 pl-4"},ea={__name:"SmartFarmingPrograms",setup(g){const{t:i,locale:s}=oe();ce();const u=ne(),k=G(()=>["fa","pa"].includes(s.value)?"rtl":"ltr"),j=h("");let Y;const o=()=>{clearTimeout(Y),Y=setTimeout(()=>{u.fetchSmartFarmingPrograms({page:1,itemsPerPage:u.itemsPerPage,status:j.value})},500)},C=c=>{u.fetchSmartFarmingPrograms({page:c.page,itemsPerPage:c.itemsPerPage,status:j.value})},y=h([]),L=()=>{y.value.length>0&&(u.bulkDeleteSmartFarmingPrograms(y.value),y.value=[])},K=()=>{u.resetCurrentSmartFarmingProgram(),u.isEditMode=!1,u.createDialog=!0},$=c=>{u.isEditMode=!0,u.currentSmartFarmingProgram={...c},u.createDialog=!0},w=async c=>{await u.deleteSmartFarmingProgram(c.id)},q=async c=>{await u.toggleStatus(c.id)},Q=c=>{switch(c){case"published":return"success";case"draft":return"warning";case"ongoing":return"info";case"completed":return"primary";case"cancelled":return"error";default:return"primary"}},B=c=>{const f=u.farmingTypeOptions.find(A=>A.value===c);return f?f.label:c},R=G(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:i("name"),key:"name",align:"start",sortable:!0},{title:i("farming_type"),key:"farming_type",align:"center",sortable:!0},{title:i("status"),key:"status",align:"center",sortable:!0},{title:i("sustainability_level"),key:"sustainability_level",align:"center",sortable:!0},{title:i("application_deadline"),key:"application_deadline",align:"center",sortable:!0},{title:i("action"),key:"action",align:"center",sortable:!1}]);return de(()=>{u.fetchSmartFarmingPrograms({page:1,itemsPerPage:u.itemsPerPage})}),(c,f)=>{const A=b("v-divider"),x=b("v-text-field"),T=b("v-btn"),H=b("v-icon"),ee=b("v-img"),ae=b("v-avatar"),X=b("v-chip"),e=b("v-checkbox"),m=b("v-list-item-title"),p=b("v-list-item"),V=b("v-list"),O=b("v-menu"),J=b("v-data-table-server"),D=b("v-col"),a=b("v-row"),_=b("v-main"),n=b("v-app");return I(),z(pe,null,[v(u).createDialog?(I(),Z(Le,{key:0})):M("",!0),r("div",{dir:k.value},[l(ge,{pageTitle:c.$t("smart_farming_programs_management")},null,8,["pageTitle"]),l(A,{thickness:1,class:"border-opacity-100"}),r("div",Ae,[r("div",Te,[l(x,{color:"primary",density:"compact",variant:"outlined",label:c.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:v(u).smartFarmingProgramsSearch,"onUpdate:modelValue":f[0]||(f[0]=t=>v(u).smartFarmingProgramsSearch=t),onInput:o},null,8,["label","modelValue"])]),r("div",De,[l(T,{variant:"outlined",color:"primary",class:"px-6"},{default:d(()=>[P(U(v(i)("filter")),1)]),_:1}),f[4]||(f[4]=P(" Â  ",-1)),l(T,{onClick:K,class:"create-btn-gradient px-6",text:c.$t("create")},{default:d(()=>[l(H,null,{default:d(()=>[...f[3]||(f[3]=[P("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),r("div",Ne,[l(n,null,{default:d(()=>[l(_,{class:"main"},{default:d(()=>[l(a,null,{default:d(()=>[l(D,null,{default:d(()=>[l(J,{dir:k.value,theme:"cursor-pointer","items-per-page":v(u).itemsPerPage,"onUpdate:itemsPerPage":f[2]||(f[2]=t=>v(u).itemsPerPage=t),headers:R.value,"items-length":v(u).totalItems,items:v(u).smartFarmingPrograms,loading:v(u).loading,"onUpdate:options":C,hover:"",class:"w-100 mx-auto"},{"no-data":d(()=>[r("div",We,U(c.$t("no_data_available")),1)]),"item.name":d(({item:t})=>[r("td",Ge,[r("div",Je,[t.cover_image?(I(),Z(ae,{key:0,size:"40",class:"mr-3"},{default:d(()=>[l(ee,{src:t.cover_image,alt:t.name},null,8,["src","alt"])]),_:2},1024)):M("",!0),r("div",null,[r("div",Ye,U(t.name),1),r("div",Ke,U(t.farming_type),1)])])])]),"item.farming_type":d(({item:t})=>[r("td",Qe,[l(X,{color:"primary",size:"small",variant:"outlined"},{default:d(()=>[P(U(B(t.farming_type)),1)]),_:2},1024)])]),"item.status":d(({item:t})=>[r("td",Xe,[l(X,{color:Q(t.status),size:"small",variant:"flat"},{default:d(()=>[P(U(v(u).getStatusLabel(t.status)),1)]),_:2},1032,["color"])])]),"item.sustainability_level":d(({item:t})=>[r("td",Ze,[r("span",null,U(t.sustainability_level?t.sustainability_level+"%":"N/A"),1)])]),"item.application_deadline":d(({item:t})=>[r("td",xe,[r("span",null,U(v(u).formatDate(t.application_deadline)),1)])]),"item.checkbox":d(({item:t})=>[l(e,{value:t.id,modelValue:y.value,"onUpdate:modelValue":f[1]||(f[1]=N=>y.value=N),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":d(({item:t})=>[l(O,null,{activator:d(({props:N})=>[l(T,me({icon:"mdi-dots-vertical"},N,{variant:"text"}),null,16)]),default:d(()=>[l(V,null,{default:d(()=>[l(p,null,{default:d(()=>[l(m,{onClick:N=>$(t),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:d(()=>[l(H,{color:"tealColor"},{default:d(()=>[...f[5]||(f[5]=[P("mdi-square-edit-outline",-1)])]),_:1}),P(" "+U(c.$t("edit")),1)]),_:1},8,["onClick"]),l(m,{onClick:N=>q(t),class:"cursor-pointer d-flex gap-3 pb-3"},{default:d(()=>[l(H,{color:t.status==="published"?"orange":"green"},{default:d(()=>[P(U(t.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),P(" "+U(t.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),l(m,{class:"cursor-pointer d-flex gap-3",onClick:N=>w(t)},{default:d(()=>[l(H,{color:"error"},{default:d(()=>[...f[6]||(f[6]=[P("mdi-delete-outline",-1)])]),_:1}),P(" "+U(c.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),y.value.length>0?(I(),Z(T,{key:0,class:"header-button",onClick:L,color:"#B71C1C",flat:"",inset:"",text:`Delete ${y.value.length} selected`},null,8,["text"])):M("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,qe)],64)}}},na=se(ea,[["__scopeId","data-v-dc50dac8"]]);export{na as default};
