import{al as ce,i as L,N as J,r as y,G as pe,q as ie,c as Y,y as oe,h as _,z as ee,j as z,w as u,g as t,d as i,u as C,t as U,B as ne,D as se,b as H,f as M,s as G,l as P,o as me,a0 as ge,F as ve}from"./_plugin-vue_export-helper-P6s7mfAX.js";import{H as be}from"./Header-Dc2gjrUc.js";import{l as k,u as re,a as he}from"./admin-C1tUPR0Q.js";import{T as x,a as _e}from"./TranslationField-DYZ6aUjw.js";/* empty css                                                               *//* empty css              */let ue=ce("EnvironmentalProjectsRepository",{state(){return{isEditMode:y(!1),router:pe(),search:y(""),loadingTable:y(!0),loading:y(!0),totalItems:y(0),selectedItems:y([]),itemsPerPage:y(5),createDialog:y(!1),environmentalProjects:J([]),environmentalProjectsSearch:y(""),currentEnvironmentalProject:J({}),statusOptions:J([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),projectTypeOptions:J([{value:"conservation",label:"Conservation"},{value:"reforestation",label:"Reforestation"},{value:"water_management",label:"Water Management"},{value:"soil_conservation",label:"Soil Conservation"},{value:"biodiversity",label:"Biodiversity"},{value:"climate_adaptation",label:"Climate Adaptation"}]),impactLevelOptions:J([{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}])}},actions:{setEditMode(m){this.isEditMode=m},getTodaysDate(){const m=new Date,o=m.getFullYear(),s=String(m.getMonth()+1).padStart(2,"0"),d=String(m.getDate()).padStart(2,"0");return`${o}-${s}-${d}`},async fetchEnvironmentalProjects({page:m=1,itemsPerPage:o=5,status:s=""}){this.loading=!0;try{const d=new URLSearchParams({page:m,perPage:o,search:this.environmentalProjectsSearch});s&&d.append("status",s);const S=await L.get(`environmental-projects?${d}`);S.data.success?(this.environmentalProjects=S.data.data||[],this.totalItems=S.data.meta?.total||0):(this.environmentalProjects=[],this.totalItems=0,k.error(S.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(d){this.environmentalProjects=[],this.totalItems=0,this.loading=!1;const S=d.response?.data?.message||"Failed to fetch environmental projects";k.error(S,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchEnvironmentalProject(m){this.loading=!0;try{const o=await L.get(`environmental-projects/${m}`,{params:{include_translations:1}});this.currentEnvironmentalProject=o.data.data,this.loading=!1}catch{this.loading=!1,k.error("Failed to fetch environmental project",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createEnvironmentalProject(m){try{const o=await L.post("environmental-projects",m);this.createDialog=!1,k.success("Environmental project created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchEnvironmentalProjects({page:1,itemsPerPage:this.itemsPerPage})}catch(o){const s=o.response?.data?.message||"Failed to create environmental project. Please try again.";k.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateEnvironmentalProject(m,o){try{const s=await L.post(`environmental-projects/${m}`,o,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,k.success("Environmental project updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchEnvironmentalProjects({page:1,itemsPerPage:this.itemsPerPage}),s}catch(s){const d=s.response?.data?.message||"Failed to update environmental project. Please try again.";throw k.error(d,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s}},async deleteEnvironmentalProject(m){try{await L.delete(`environmental-projects/${m}`),k.success("Environmental project deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchEnvironmentalProjects({page:1,itemsPerPage:this.itemsPerPage})}catch(o){const s=o.response?.data?.message||"Failed to delete environmental project. Please try again.";k.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteEnvironmentalProjects(m){try{const o=m.map(s=>L.delete(`environmental-projects/${s}`));await Promise.all(o),k.success(`${m.length} environmental projects deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchEnvironmentalProjects({page:1,itemsPerPage:this.itemsPerPage})}catch{k.error("Failed to delete selected environmental projects. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(m){try{const o=await L.post(`environmental-projects/${m}/toggle-status`);k.success("Environmental project status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchEnvironmentalProjects({page:1,itemsPerPage:this.itemsPerPage})}catch(o){const s=o.response?.data?.message||"Failed to update environmental project status. Please try again.";k.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedEnvironmentalProjects({page:m=1,itemsPerPage:o=10}){try{const s=new URLSearchParams({page:m,perPage:o,search:this.environmentalProjectsSearch});return(await L.get(`environmental-projects/published?${s}`)).data}catch{return{success:!1,data:[],meta:{total:0}}}},getStatusLabel(m){const o=this.statusOptions.find(s=>s.value===m);return o?o.label:m},formatDate(m){return m?new Date(m).toLocaleDateString():""},resetCurrentEnvironmentalProject(){this.currentEnvironmentalProject={id:null,title:"",slug:"",description:"",project_type:"conservation",location:"",start_date:null,end_date:null,budget:null,impact_level:"medium",objectives:"",methodology:"",expected_outcomes:"",partner_organizations:[],cover_image:"",thumbnail_image:"",status:"draft"}}}});const fe={class:"flex w-100"},ye={class:"flex w-100"},Ve={class:"flex w-100"},je={class:"flex w-100"},Pe={class:"flex w-100"},Ce={class:"flex w-100 image-upload-row mb-4"},$e={class:"w-50 image-upload-wrapper"},Ue={class:"image-upload-label mb-3 d-block"},Ee=["src"],we={class:"photo-overlay"},Ie={class:"w-50 image-upload-wrapper"},ke={class:"image-upload-label mb-3 d-block"},Oe=["src"],Se={class:"photo-overlay"},ze={class:"w-100"},xe={class:"w-100"},Me={class:"w-100"},Be={class:"w-100"},Re={class:"w-100"},Le={__name:"CreateEnvironmentalProjectTranslatable",setup(m){const{t:o}=re(),s=ue(),d=Y(()=>s.isEditMode?o("update"):o("create")),S=Y(()=>s.isEditMode?o("update"):o("submit")),A=y(!1),Q=["title","description","objectives","methodology","expected_outcomes"],a=J({id:null,title:"",slug:"",description:"",project_type:"conservation",location:"",start_date:null,end_date:null,budget:null,impact_level:"medium",objectives:"",methodology:"",expected_outcomes:"",partner_organizations:[],cover_image:"",thumbnail_image:"",status:"draft"}),E=y(null),V=y(null),F=y(null),X=y(null),w=y(null),O=y(null),q=y(null),Z=y(null),B=Y(()=>V.value||a.cover_image||null),R=Y(()=>O.value||a.thumbnail_image||null);oe(E,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(o("please_select_image")||"Please select a valid image file"),E.value=null,V.value=null;return}if(e.size>3*1024*1024){alert(o("image_too_large")||"Image size must be less than 3MB"),E.value=null,V.value=null;return}a.cover_image="";const c=new FileReader;c.onload=v=>{V.value=v.target.result},c.onerror=()=>{V.value=null},c.readAsDataURL(e)}else e||a.cover_image||(V.value=null)}),oe(w,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(o("please_select_image")||"Please select a valid image file"),w.value=null,O.value=null;return}if(e.size>3*1024*1024){alert(o("image_too_large")||"Image size must be less than 3MB"),w.value=null,O.value=null;return}a.thumbnail_image="";const c=new FileReader;c.onload=v=>{O.value=v.target.result},c.onerror=()=>{O.value=null},c.readAsDataURL(e)}else e||a.thumbnail_image||(O.value=null)}),oe(()=>s.currentEnvironmentalProject,e=>{e&&Object.keys(e).length>0&&(a.id=e.id,a.title=e.title||"",a.slug=e.slug||"",a.description=e.description||"",a.project_type=e.project_type||"conservation",a.location=e.location||"",a.start_date=e.start_date?new Date(e.start_date).toISOString().slice(0,10):null,a.end_date=e.end_date?new Date(e.end_date).toISOString().slice(0,10):null,a.budget=e.budget||null,a.impact_level=e.impact_level||"medium",a.objectives=e.objectives||"",a.methodology=e.methodology||"",a.expected_outcomes=e.expected_outcomes||"",a.partner_organizations=e.partner_organizations||[],a.cover_image=e.cover_image||"",a.thumbnail_image=e.thumbnail_image||"",a.status=e.status||"draft",E.value=null,V.value=a.cover_image||null,X.value=a.cover_image||null,w.value=null,O.value=a.thumbnail_image||null,Z.value=a.thumbnail_image||null,a.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}})},{deep:!0,immediate:!0});const te={required:e=>!!e||o("field_required")},le=()=>{a.title&&!a.slug&&(a.slug=a.title.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},g=()=>{F.value?.click()},b=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(E.value=e.target.files[0])},T=()=>{E.value=null,V.value=null,a.cover_image="",F.value&&(F.value.value="")},K=()=>{q.value?.click()},N=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(w.value=e.target.files[0])},D=()=>{w.value=null,O.value=null,a.thumbnail_image="",q.value&&(q.value.value="")},ae=async({data:e})=>{A.value=!0;try{const r=new FormData;if(Object.keys(e).forEach(c=>{if(c!=="cover_image"&&c!=="thumbnail_image")if(c==="translations"){const v={...e[c]},h=I=>Array.isArray(I)?I.map($=>typeof $=="object"&&$!==null&&"value"in $?$.value:$).filter($=>$!=null&&$!==""):I;["farsi","pashto"].forEach(I=>{v[I]&&v[I].partner_organizations&&(v[I].partner_organizations=h(v[I].partner_organizations))}),r.append(c,JSON.stringify(v))}else c==="partner_organizations"&&Array.isArray(e[c])?e[c].map(h=>typeof h=="object"&&h!==null&&"value"in h?h.value:h).filter(h=>h!=null&&h!=="").forEach((h,I)=>{r.append(`${c}[${I}]`,h)}):c==="start_date"||c==="end_date"?e[c]&&r.append(c,new Date(e[c]).toISOString().split("T")[0]):e[c]!==null&&e[c]!==void 0&&r.append(c,e[c])}),E.value?r.append("cover_image",E.value):s.isEditMode&&!V.value&&!E.value&&X.value?r.append("cover_image",""):a.cover_image&&!a.cover_image.startsWith("data:")&&!E.value?r.append("cover_image",a.cover_image):s.isEditMode||r.append("cover_image",""),w.value?r.append("thumbnail_image",w.value):s.isEditMode&&!O.value&&!w.value&&Z.value?r.append("thumbnail_image",""):a.thumbnail_image&&!a.thumbnail_image.startsWith("data:")&&!w.value?r.append("thumbnail_image",a.thumbnail_image):s.isEditMode||r.append("thumbnail_image",""),s.isEditMode){const c=await s.updateEnvironmentalProject(a.id,r),v=c?.data?.data||c?.data||{};E.value&&v.cover_image&&(a.cover_image=v.cover_image,V.value=v.cover_image,E.value=null),w.value&&v.thumbnail_image&&(a.thumbnail_image=v.thumbnail_image,O.value=v.thumbnail_image,w.value=null)}else await s.createEnvironmentalProject(r)}finally{A.value=!1}};return(e,r)=>{const c=_("v-text-field"),v=_("v-select"),h=_("v-icon"),I=_("v-combobox"),$=_("v-textarea");return z(),ee(_e,{modelValue:C(s).createDialog,"onUpdate:modelValue":r[2]||(r[2]=l=>C(s).createDialog=l),"form-title":d.value,"button-text":S.value,"translatable-fields":Q,"form-data":a,rules:te,saving:A.value,"is-edit-mode":C(s).isEditMode,onSave:ae},{"base-fields":u(({formData:l,rules:j})=>[i("div",fe,[t(c,{modelValue:l.title,"onUpdate:modelValue":n=>l.title=n,variant:"outlined",label:e.$t("title"),density:"compact",class:"pb-4 pr-2 w-75",rules:[j.required],onInput:le},null,8,["modelValue","onUpdate:modelValue","label","rules"]),t(v,{modelValue:l.status,"onUpdate:modelValue":n=>l.status=n,items:C(s).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[j.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),i("div",ye,[t(c,{modelValue:l.slug,"onUpdate:modelValue":n=>l.slug=n,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),t(v,{modelValue:l.project_type,"onUpdate:modelValue":n=>l.project_type=n,items:C(s).projectTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("project_type"),class:"pb-4 pl-2 w-50",rules:[j.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),i("div",Ve,[t(c,{modelValue:l.location,"onUpdate:modelValue":n=>l.location=n,variant:"outlined",label:e.$t("location"),density:"compact",class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"]),t(v,{modelValue:l.impact_level,"onUpdate:modelValue":n=>l.impact_level=n,items:C(s).impactLevelOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("impact_level"),class:"pb-4 pl-2 w-50"},null,8,["modelValue","onUpdate:modelValue","items","label"])]),i("div",je,[t(c,{modelValue:l.start_date,"onUpdate:modelValue":n=>l.start_date=n,variant:"outlined",label:e.$t("start_date"),density:"compact",type:"date",class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"]),t(c,{modelValue:l.end_date,"onUpdate:modelValue":n=>l.end_date=n,variant:"outlined",label:e.$t("end_date"),density:"compact",type:"date",class:"pb-4 pl-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"])]),i("div",Pe,[t(c,{modelValue:l.budget,"onUpdate:modelValue":n=>l.budget=n,variant:"outlined",label:e.$t("budget"),density:"compact",type:"number",class:"pb-4 w-100",hint:e.$t("hint_budget_usd"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),i("div",Ce,[i("div",$e,[i("label",Ue,U(e.$t("cover_image")),1),i("div",{class:"photo-upload-container",onClick:r[0]||(r[0]=n=>!B.value&&g())},[i("input",{ref_key:"coverImageInputRef",ref:F,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:b},null,544),ne(i("img",{src:B.value,class:"photo-preview"},null,8,Ee),[[se,B.value!==null]]),i("div",we,[B.value?M("",!0):(z(),H("button",{key:0,type:"button",onClick:G(g,["stop"]),class:"overlay-button"},[t(h,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...r[3]||(r[3]=[P("mdi-camera",-1)])]),_:1})])),B.value?(z(),H("button",{key:1,type:"button",onClick:G(T,["stop"]),class:"close-button"},[t(h,{size:"lg",color:"red"},{default:u(()=>[...r[4]||(r[4]=[P("mdi-close",-1)])]),_:1})])):M("",!0),B.value?(z(),H("button",{key:2,type:"button",onClick:G(g,["stop"]),class:"edit-button"},[t(h,{size:"small"},{default:u(()=>[...r[5]||(r[5]=[P("mdi-pencil",-1)])]),_:1})])):M("",!0)])])]),i("div",Ie,[i("label",ke,U(e.$t("thumbnail_image")),1),i("div",{class:"photo-upload-container",onClick:r[1]||(r[1]=n=>!R.value&&K())},[i("input",{ref_key:"thumbnailImageInputRef",ref:q,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:N},null,544),ne(i("img",{src:R.value,class:"photo-preview"},null,8,Oe),[[se,R.value!==null]]),i("div",Se,[R.value?M("",!0):(z(),H("button",{key:0,type:"button",onClick:G(K,["stop"]),class:"overlay-button"},[t(h,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...r[6]||(r[6]=[P("mdi-camera",-1)])]),_:1})])),R.value?(z(),H("button",{key:1,type:"button",onClick:G(D,["stop"]),class:"close-button"},[t(h,{size:"lg",color:"red"},{default:u(()=>[...r[7]||(r[7]=[P("mdi-close",-1)])]),_:1})])):M("",!0),R.value?(z(),H("button",{key:2,type:"button",onClick:G(K,["stop"]),class:"edit-button"},[t(h,{size:"small"},{default:u(()=>[...r[8]||(r[8]=[P("mdi-pencil",-1)])]),_:1})])):M("",!0)])])])]),i("div",ze,[t(I,{modelValue:l.partner_organizations,"onUpdate:modelValue":n=>l.partner_organizations=n,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),i("div",xe,[t($,{modelValue:l.description,"onUpdate:modelValue":n=>l.description=n,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[j.required],rows:"6",hint:e.$t("hint_environmental_description"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])]),i("div",Me,[t($,{modelValue:l.objectives,"onUpdate:modelValue":n=>l.objectives=n,variant:"outlined",label:e.$t("objectives"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_project_objectives"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),i("div",Be,[t($,{modelValue:l.methodology,"onUpdate:modelValue":n=>l.methodology=n,variant:"outlined",label:e.$t("methodology"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_project_methodology"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),i("div",Re,[t($,{modelValue:l.expected_outcomes,"onUpdate:modelValue":n=>l.expected_outcomes=n,variant:"outlined",label:e.$t("expected_outcomes"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_project_outcomes"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"farsi-fields":u(({translations:l,clearTranslation:j,hasTranslation:n})=>[t(x,{modelValue:l.title,"onUpdate:modelValue":f=>l.title=f,"field-name":"title","field-label":e.$t("title"),language:"farsi","language-label":e.$t("dari"),"has-translation":n("title"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.description,"onUpdate:modelValue":f=>l.description=f,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":n("description"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.objectives,"onUpdate:modelValue":f=>l.objectives=f,"field-name":"objectives","field-label":e.$t("objectives"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":n("objectives"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.methodology,"onUpdate:modelValue":f=>l.methodology=f,"field-name":"methodology","field-label":e.$t("methodology"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":n("methodology"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.expected_outcomes,"onUpdate:modelValue":f=>l.expected_outcomes=f,"field-name":"expected_outcomes","field-label":e.$t("expected_outcomes"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":n("expected_outcomes"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),"pashto-fields":u(({translations:l,clearTranslation:j,hasTranslation:n})=>[t(x,{modelValue:l.title,"onUpdate:modelValue":f=>l.title=f,"field-name":"title","field-label":e.$t("title"),language:"pashto","language-label":e.$t("pashto"),"has-translation":n("title"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.description,"onUpdate:modelValue":f=>l.description=f,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":n("description"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.objectives,"onUpdate:modelValue":f=>l.objectives=f,"field-name":"objectives","field-label":e.$t("objectives"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":n("objectives"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.methodology,"onUpdate:modelValue":f=>l.methodology=f,"field-name":"methodology","field-label":e.$t("methodology"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":n("methodology"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),t(x,{modelValue:l.expected_outcomes,"onUpdate:modelValue":f=>l.expected_outcomes=f,"field-name":"expected_outcomes","field-label":e.$t("expected_outcomes"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":n("expected_outcomes"),onClear:j},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Te=ie(Le,[["__scopeId","data-v-9e58ce70"]]),He=["dir"],Ae={class:"btn-search pt-12 pb-6"},Fe={class:"text-field w-25"},qe={class:"btn flex"},Ne={class:"table-section"},De={class:"text-center pa-4"},We={class:"py-2 pl-4"},Ge={class:"d-flex align-center"},Je={class:"font-weight-medium"},Ye={class:"text-caption text-grey"},Ke={class:"py-2 pl-4"},Qe={class:"py-2 pl-4"},Xe={class:"py-2 pl-4"},Ze={class:"py-2 pl-4"},et={class:"py-2 pl-4"},tt={__name:"EnvironmentalProjects",setup(m){const{t:o,locale:s}=re();he();const d=ue(),S=Y(()=>["fa","pa"].includes(s.value)?"rtl":"ltr"),A=y("");let Q;const a=()=>{clearTimeout(Q),Q=setTimeout(()=>{d.fetchEnvironmentalProjects({page:1,itemsPerPage:d.itemsPerPage,status:A.value})},500)},E=g=>{d.fetchEnvironmentalProjects({page:g.page,itemsPerPage:g.itemsPerPage,status:A.value})},V=y([]),F=()=>{V.value.length>0&&(d.bulkDeleteEnvironmentalProjects(V.value),V.value=[])},X=()=>{d.resetCurrentEnvironmentalProject(),d.isEditMode=!1,d.createDialog=!0},w=g=>{d.isEditMode=!0,d.currentEnvironmentalProject={...g},d.createDialog=!0},O=async g=>{await d.deleteEnvironmentalProject(g.id)},q=async g=>{await d.toggleStatus(g.id)},Z=g=>{switch(g){case"published":return"success";case"draft":return"warning";case"ongoing":return"info";case"completed":return"primary";case"cancelled":return"error";default:return"primary"}},B=g=>{switch(g){case"low":return"success";case"medium":return"warning";case"high":return"orange";case"critical":return"error";default:return"primary"}},R=g=>{const b=d.projectTypeOptions.find(T=>T.value===g);return b?b.label:g},te=g=>{const b=d.impactLevelOptions.find(T=>T.value===g);return b?b.label:g},le=Y(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:o("title"),key:"title",align:"start",sortable:!0},{title:o("project_type"),key:"project_type",align:"center",sortable:!0},{title:o("status"),key:"status",align:"center",sortable:!0},{title:o("impact_level"),key:"impact_level",align:"center",sortable:!0},{title:o("start_date"),key:"start_date",align:"center",sortable:!0},{title:o("budget"),key:"budget",align:"center",sortable:!0},{title:o("action"),key:"action",align:"center",sortable:!1}]);return me(()=>{d.fetchEnvironmentalProjects({page:1,itemsPerPage:d.itemsPerPage})}),(g,b)=>{const T=_("v-divider"),K=_("v-text-field"),N=_("v-btn"),D=_("v-icon"),ae=_("v-img"),e=_("v-avatar"),r=_("v-chip"),c=_("v-checkbox"),v=_("v-list-item-title"),h=_("v-list-item"),I=_("v-list"),$=_("v-menu"),l=_("v-data-table-server"),j=_("v-col"),n=_("v-row"),f=_("v-main"),de=_("v-app");return z(),H(ve,null,[C(d).createDialog?(z(),ee(Te,{key:0})):M("",!0),i("div",{dir:S.value},[t(be,{pageTitle:g.$t("environmental_projects_management")},null,8,["pageTitle"]),t(T,{thickness:1,class:"border-opacity-100"}),i("div",Ae,[i("div",Fe,[t(K,{color:"primary",density:"compact",variant:"outlined",label:g.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:C(d).environmentalProjectsSearch,"onUpdate:modelValue":b[0]||(b[0]=p=>C(d).environmentalProjectsSearch=p),onInput:a},null,8,["label","modelValue"])]),i("div",qe,[t(N,{variant:"outlined",color:"primary",class:"px-6"},{default:u(()=>[P(U(C(o)("filter")),1)]),_:1}),b[4]||(b[4]=P(" Â  ",-1)),t(N,{onClick:X,class:"create-btn-gradient px-6",text:g.$t("create")},{default:u(()=>[t(D,null,{default:u(()=>[...b[3]||(b[3]=[P("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),i("div",Ne,[t(de,null,{default:u(()=>[t(f,{class:"main"},{default:u(()=>[t(n,null,{default:u(()=>[t(j,null,{default:u(()=>[t(l,{dir:S.value,theme:"cursor-pointer","items-per-page":C(d).itemsPerPage,"onUpdate:itemsPerPage":b[2]||(b[2]=p=>C(d).itemsPerPage=p),headers:le.value,"items-length":C(d).totalItems,items:C(d).environmentalProjects,loading:C(d).loading,"onUpdate:options":E,hover:"",class:"w-100 mx-auto"},{"no-data":u(()=>[i("div",De,U(g.$t("no_data_available")),1)]),"item.title":u(({item:p})=>[i("td",We,[i("div",Ge,[p.cover_image?(z(),ee(e,{key:0,size:"40",class:"mr-3"},{default:u(()=>[t(ae,{src:p.cover_image,alt:p.title},null,8,["src","alt"])]),_:2},1024)):M("",!0),i("div",null,[i("div",Je,U(p.title),1),i("div",Ye,U(p.location),1)])])])]),"item.project_type":u(({item:p})=>[i("td",Ke,[t(r,{color:"primary",size:"small",variant:"outlined"},{default:u(()=>[P(U(R(p.project_type)),1)]),_:2},1024)])]),"item.status":u(({item:p})=>[i("td",Qe,[t(r,{color:Z(p.status),size:"small",variant:"flat"},{default:u(()=>[P(U(C(d).getStatusLabel(p.status)),1)]),_:2},1032,["color"])])]),"item.impact_level":u(({item:p})=>[i("td",Xe,[t(r,{color:B(p.impact_level),size:"small",variant:"flat"},{default:u(()=>[P(U(te(p.impact_level)),1)]),_:2},1032,["color"])])]),"item.start_date":u(({item:p})=>[i("td",Ze,[i("span",null,U(C(d).formatDate(p.start_date)),1)])]),"item.budget":u(({item:p})=>[i("td",et,[i("span",null,U(p.budget?"$"+p.budget.toLocaleString():"N/A"),1)])]),"item.checkbox":u(({item:p})=>[t(c,{value:p.id,modelValue:V.value,"onUpdate:modelValue":b[1]||(b[1]=W=>V.value=W),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":u(({item:p})=>[t($,null,{activator:u(({props:W})=>[t(N,ge({icon:"mdi-dots-vertical"},W,{variant:"text"}),null,16)]),default:u(()=>[t(I,null,{default:u(()=>[t(h,null,{default:u(()=>[t(v,{onClick:W=>w(p),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:u(()=>[t(D,{color:"tealColor"},{default:u(()=>[...b[5]||(b[5]=[P("mdi-square-edit-outline",-1)])]),_:1}),P(" "+U(g.$t("edit")),1)]),_:1},8,["onClick"]),t(v,{onClick:W=>q(p),class:"cursor-pointer d-flex gap-3 pb-3"},{default:u(()=>[t(D,{color:p.status==="published"?"orange":"green"},{default:u(()=>[P(U(p.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),P(" "+U(p.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),t(v,{class:"cursor-pointer d-flex gap-3",onClick:W=>O(p)},{default:u(()=>[t(D,{color:"error"},{default:u(()=>[...b[6]||(b[6]=[P("mdi-delete-outline",-1)])]),_:1}),P(" "+U(g.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),V.value.length>0?(z(),ee(N,{key:0,class:"header-button",onClick:F,color:"#B71C1C",flat:"",inset:"",text:`Delete ${V.value.length} selected`},null,8,["text"])):M("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,He)],64)}}},rt=ie(tt,[["__scopeId","data-v-53303bff"]]);export{rt as default};
