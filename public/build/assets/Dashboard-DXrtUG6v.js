import{al as H,i as q,N as M,r as A,q as Y,y as J,c as k,o as K,h as g,b as m,j as y,g as e,w as o,k as R,d as t,l as h,t as n,u as l,F as T,e as B,f as Q,n as $}from"./_plugin-vue_export-helper-P6s7mfAX.js";import{H as W}from"./Header-Dc2gjrUc.js";import{u as X}from"./admin-C1tUPR0Q.js";/* empty css                                                               *//* empty css              */const Z=H("DashboardRepository",{state(){return{loading:A(!1),dashboardReport:M({totalNews:0,totalPublications:0,totalSuccessStories:0,totalTrainingPrograms:0,totalContacts:0,publishedNews:0,publishedPublications:0,publishedSuccessStories:0,activeTrainingPrograms:0,draftNews:0,draftPublications:0,newsBreakdown:[],publicationsBreakdown:[],trainingBreakdown:[],dailyContent:[],monthlyContent:[],yearlyContent:[],recentContacts:[],upcomingAppointments:[]}),expensesList:M([])}},actions:{async fetchDashboardData(){this.loading=!0;try{const{data:_}=await q.get("dashboard/stats");if(_.success&&_.data){const s=_.data;this.dashboardReport.totalNews=s.news?.total||0,this.dashboardReport.totalPublications=s.publications?.total||0,this.dashboardReport.totalSuccessStories=s.success_stories?.total||0,this.dashboardReport.totalTrainingPrograms=s.training_programs?.total||0,this.dashboardReport.totalContacts=s.contacts?.total||0,this.dashboardReport.publishedNews=s.news?.published||0,this.dashboardReport.publishedPublications=s.publications?.published||0,this.dashboardReport.publishedSuccessStories=s.success_stories?.published||0,this.dashboardReport.activeTrainingPrograms=s.training_programs?.active||0,this.dashboardReport.draftNews=s.news?.draft||0,this.dashboardReport.draftPublications=s.publications?.draft||0,this.dashboardReport.newsBreakdown=s.news_breakdown||[],this.dashboardReport.publicationsBreakdown=s.publications_breakdown||[],this.dashboardReport.trainingBreakdown=s.training_breakdown||[],this.dashboardReport.dailyContent=s.daily_content||[],this.dashboardReport.monthlyContent=s.monthly_content||[],this.dashboardReport.yearlyContent=s.yearly_content||[],this.dashboardReport.recentContacts=s.recent_contacts||[],this.updateExpenses(this.dashboardReport.yearlyContent,"black")}}catch{}finally{this.loading=!1}},updateExpenses(_,s){if(!_||!Array.isArray(_)){this.expensesList=[];return}const b=_.reduce((u,w)=>u+(w.count||w.total||0),0);this.expensesList=_.map((u,w)=>{const r=u.count||u.total||0,C=b>0?Math.round(r/b*100):0;return{id:u.id||w,categoryName:u.category||u.type||u.name||"Unknown",totalExpense:r,percentage:C}}).sort((u,w)=>w.totalExpense-u.totalExpense)}}}),tt={class:"dashboard-container"},st={class:"stat-card-content"},at={class:"stat-icon-wrapper news-icon"},et={class:"stat-info"},ot={class:"stat-value"},nt={class:"stat-label"},rt={class:"stat-subtitle"},lt={class:"stat-card-content"},it={class:"stat-icon-wrapper publications-icon"},ct={class:"stat-info"},dt={class:"stat-value"},ut={class:"stat-label"},ht={class:"stat-subtitle"},pt={class:"stat-card-content"},_t={class:"stat-icon-wrapper success-stories-icon"},bt={class:"stat-info"},vt={class:"stat-value"},ft={class:"stat-label"},gt={class:"stat-subtitle"},mt={class:"stat-card-content"},yt={class:"stat-icon-wrapper training-icon"},wt={class:"stat-info"},kt={class:"stat-value"},Rt={class:"stat-label"},Ct={class:"stat-subtitle"},xt={class:"title-content"},Pt={class:"time-filter-buttons"},St={class:"total-content-display"},Nt={class:"total-label"},Dt={class:"total-value"},zt={class:"expenses-list"},Tt={class:"expense-header"},Bt={class:"expense-label"},Et={class:"expense-category"},It={class:"expense-count"},Lt={class:"expense-percentage"},Mt={class:"title-content"},$t={class:"contacts-table"},At={class:"custom-table"},Ot={class:"contact-name"},Ut={class:"text-center"},Vt={class:"time-badge"},jt={class:"text-center"},Ft={class:"phone-text"},Gt={key:0},Ht={colspan:"3",class:"empty-state"},qt={class:"title-content"},Yt={class:"bar-chart"},Jt={class:"bar-label-wrapper"},Kt={class:"bar-label"},Qt={class:"bar-wrapper"},Wt={class:"bar-value"},Xt={class:"title-content"},Zt={class:"pie-chart-container"},ts={class:"pie-chart-wrapper"},ss={class:"pie-chart",viewBox:"0 0 200 200"},as=["stroke","stroke-dasharray"],es=["stroke","stroke-dasharray","stroke-dashoffset"],os={class:"pie-chart-center"},ns={class:"pie-chart-number"},rs={class:"pie-chart-label"},ls={class:"pie-legend"},is={class:"legend-item"},cs={class:"legend-info"},ds={class:"legend-label"},us={class:"legend-value"},hs={class:"legend-item"},ps={class:"legend-info"},_s={class:"legend-label"},bs={class:"legend-value"},vs={__name:"Dashboard",setup(_){const{t:s,locale:b}=X(),u=localStorage.getItem("locale");u&&u!==b.value&&(b.value=u),J(()=>b.value,i=>{const a=localStorage.getItem("locale");i&&i!==a&&localStorage.setItem("locale",i)});const w=k(()=>b.value==="fa"||b.value==="ps"?"rtl":"ltr");let r=Z();K(async()=>{const i=localStorage.getItem("locale");i&&i!==b.value&&(b.value=i),await r.fetchDashboardData()});const C=A("black"),z=(i,a)=>{r.updateExpenses(i,a),C.value=a},O=k(()=>r.expensesList.reduce((i,a)=>i+(a.totalExpense||0),0)),U=k(()=>{const i=[{label:s("news"),value:r.dashboardReport.publishedNews,color:"#10b981"},{label:s("publications"),value:r.dashboardReport.publishedPublications,color:"#3b82f6"},{label:s("success_stories"),value:r.dashboardReport.publishedSuccessStories,color:"#f59e0b"},{label:s("training_programs"),value:r.dashboardReport.activeTrainingPrograms,color:"#8b5cf6"},{label:s("contacts"),value:r.dashboardReport.totalContacts,color:"#ef4444"}],a=Math.max(...i.map(v=>v.value),1);return i.map(v=>({...v,percentage:a>0?Math.round(v.value/a*100):0}))}),E=k(()=>r.dashboardReport.publishedNews+r.dashboardReport.publishedPublications+r.dashboardReport.publishedSuccessStories+r.dashboardReport.activeTrainingPrograms+r.dashboardReport.draftNews+r.dashboardReport.draftPublications),I=k(()=>r.dashboardReport.publishedNews+r.dashboardReport.publishedPublications+r.dashboardReport.publishedSuccessStories+r.dashboardReport.activeTrainingPrograms),L=k(()=>r.dashboardReport.draftNews+r.dashboardReport.draftPublications),P=k(()=>{const i=E.value,a=I.value,v=L.value;if(i===0)return{publishedDasharray:"0 502.65",draftDasharray:"0 502.65",draftOffset:0,publishedColor:"#e5e7eb",draftColor:"#e5e7eb"};const d=2*Math.PI*80,p=a/i*100,f=v/i*100,S=`${p/100*d} ${d}`,N=`${f/100*d} ${d}`,x=-(p/100*d);return{publishedDasharray:S,draftDasharray:N,draftOffset:x,publishedColor:"#10b981",draftColor:"#f59e0b"}}),V=i=>({News:"#10b981",Publications:"#3b82f6","Success Stories":"#f59e0b","Training Programs":"#8b5cf6",Contacts:"#ef4444"})[i]||"primary",j=i=>{if(!i)return s("unknown");const a={News:s("news"),Publications:s("publications"),"Success Stories":s("success_stories"),"Training Programs":s("training_programs"),Contacts:s("contacts"),Published:s("published"),Draft:s("draft"),Uncategorized:s("uncategorized")||"Uncategorized",General:s("general")||"General",Unknown:s("unknown")||"Unknown"};if(a[i])return a[i];const v=i.toLowerCase();for(const[d,p]of Object.entries(a))if(d.toLowerCase()===v)return p;return i};return(i,a)=>{const v=g("v-divider"),d=g("v-icon"),p=g("v-card"),f=g("v-col"),S=g("v-row"),N=g("v-btn"),x=g("v-card-title"),F=g("v-progress-linear"),D=g("v-card-text");return y(),m("div",tt,[e(W,{pageTitle:i.$t("dashboard")},null,8,["pageTitle"]),e(v,{thickness:2,class:"border-opacity-100 dashboard-divider",color:"success"}),e(S,{class:"stats-row pt-6"},{default:o(()=>[e(f,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:R(["stat-card news-card",{"hover-elevation":!0}]),elevation:"2"},{default:o(()=>[t("div",st,[t("div",at,[e(d,{size:"32",color:"white"},{default:o(()=>[...a[3]||(a[3]=[h("mdi-newspaper-variant-outline",-1)])]),_:1})]),t("div",et,[t("div",ot,n(l(r).dashboardReport.publishedNews),1),t("div",nt,n(l(s)("news")),1),t("div",rt,n(l(s)("published")),1)])])]),_:1})]),_:1}),e(f,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:R(["stat-card publications-card",{"hover-elevation":!0}]),elevation:"2"},{default:o(()=>[t("div",lt,[t("div",it,[e(d,{size:"32",color:"white"},{default:o(()=>[...a[4]||(a[4]=[h("mdi-book-outline",-1)])]),_:1})]),t("div",ct,[t("div",dt,n(l(r).dashboardReport.publishedPublications),1),t("div",ut,n(l(s)("publications")),1),t("div",ht,n(l(s)("published")),1)])])]),_:1})]),_:1}),e(f,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:R(["stat-card success-stories-card",{"hover-elevation":!0}]),elevation:"2"},{default:o(()=>[t("div",pt,[t("div",_t,[e(d,{size:"32",color:"white"},{default:o(()=>[...a[5]||(a[5]=[h("mdi-trophy-outline",-1)])]),_:1})]),t("div",bt,[t("div",vt,n(l(r).dashboardReport.publishedSuccessStories),1),t("div",ft,n(l(s)("success_stories")),1),t("div",gt,n(l(s)("published")),1)])])]),_:1})]),_:1}),e(f,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(p,{class:R(["stat-card training-card",{"hover-elevation":!0}]),elevation:"2"},{default:o(()=>[t("div",mt,[t("div",yt,[e(d,{size:"32",color:"white"},{default:o(()=>[...a[6]||(a[6]=[h("mdi-school-outline",-1)])]),_:1})]),t("div",wt,[t("div",kt,n(l(r).dashboardReport.activeTrainingPrograms),1),t("div",Rt,n(l(s)("training_programs")),1),t("div",Ct,n(l(s)("active")),1)])])]),_:1})]),_:1})]),_:1}),e(S,{class:"pt-6",dir:w.value},{default:o(()=>[e(f,{cols:"12",lg:"7"},{default:o(()=>[e(p,{class:"content-analysis-card",elevation:"2"},{default:o(()=>[e(x,{class:"card-title"},{default:o(()=>[t("div",xt,[e(d,{class:"title-icon",color:"primary"},{default:o(()=>[...a[7]||(a[7]=[h("mdi-chart-box-outline",-1)])]),_:1}),t("span",null,n(l(s)("contentBasedOnAmountAndPercentage")),1)]),t("div",Pt,[e(N,{size:"small",variant:"text",class:R(["time-filter-btn",{active:C.value==="black"}]),onClick:a[0]||(a[0]=c=>z(l(r).dashboardReport.yearlyContent,"black"))},{default:o(()=>[h(n(l(s)("thisYear")),1)]),_:1},8,["class"]),e(N,{size:"small",variant:"text",class:R(["time-filter-btn",{active:C.value==="red"}]),onClick:a[1]||(a[1]=c=>z(l(r).dashboardReport.monthlyContent,"red"))},{default:o(()=>[h(n(l(s)("thisMonth")),1)]),_:1},8,["class"]),e(N,{size:"small",variant:"text",class:R(["time-filter-btn",{active:C.value==="green"}]),onClick:a[2]||(a[2]=c=>z(l(r).dashboardReport.dailyContent,"green"))},{default:o(()=>[h(n(l(s)("today")),1)]),_:1},8,["class"])])]),_:1}),e(D,{class:"content-analysis-body"},{default:o(()=>[t("div",St,[t("span",Nt,n(l(s)("totalItems"))+":",1),t("span",Dt,n(O.value),1)]),t("div",zt,[(y(!0),m(T,null,B(l(r).expensesList,c=>(y(),m("div",{key:c.id,class:"expense-item"},[t("div",Tt,[t("div",Bt,[t("span",Et,n(j(c.categoryName)),1),t("span",It,"("+n(c.totalExpense)+")",1)]),t("span",Lt,n(c.percentage)+"%",1)]),e(F,{"model-value":Number(c.percentage),height:"10",color:V(c.categoryName),class:"expense-progress",rounded:""},null,8,["model-value","color"])]))),128))])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",lg:"5"},{default:o(()=>[e(p,{class:"recent-contacts-card",elevation:"2"},{default:o(()=>[e(x,{class:"card-title"},{default:o(()=>[t("div",Mt,[e(d,{class:"title-icon",color:"primary"},{default:o(()=>[...a[8]||(a[8]=[h("mdi-account-group-outline",-1)])]),_:1}),t("span",null,n(l(s)("recentContacts")),1)])]),_:1}),e(D,{class:"contacts-table-wrapper"},{default:o(()=>[t("div",$t,[t("table",At,[t("thead",null,[t("tr",null,[t("th",null,n(l(s)("name")),1),t("th",null,n(l(s)("time")),1),t("th",null,n(l(s)("phone")),1)])]),t("tbody",null,[(y(!0),m(T,null,B(l(r).dashboardReport.recentContacts,c=>(y(),m("tr",{key:c.id},[t("td",null,[t("div",Ot,[e(d,{size:"16",class:"contact-icon"},{default:o(()=>[...a[9]||(a[9]=[h("mdi-account-circle",-1)])]),_:1}),h(" "+n(c.name),1)])]),t("td",Ut,[t("span",Vt,n(c.time),1)]),t("td",jt,[t("span",Ft,n(c.phone||"â€”"),1)])]))),128)),l(r).dashboardReport.recentContacts.length===0?(y(),m("tr",Gt,[t("td",Ht,[e(d,{size:"48",color:"grey-lighten-1"},{default:o(()=>[...a[10]||(a[10]=[h("mdi-inbox",-1)])]),_:1}),t("p",null,n(l(s)("noRecentContacts")),1)])])):Q("",!0)])])])]),_:1})]),_:1})]),_:1})]),_:1},8,["dir"]),e(S,{class:"pt-6 charts-row"},{default:o(()=>[e(f,{cols:"12",md:"6"},{default:o(()=>[e(p,{class:"chart-card",elevation:"2"},{default:o(()=>[e(x,{class:"card-title"},{default:o(()=>[t("div",qt,[e(d,{class:"title-icon",color:"primary"},{default:o(()=>[...a[11]||(a[11]=[h("mdi-chart-bar",-1)])]),_:1}),t("span",null,n(l(s)("contentTrends")),1)])]),_:1}),e(D,{class:"chart-container"},{default:o(()=>[t("div",Yt,[(y(!0),m(T,null,B(U.value,(c,G)=>(y(),m("div",{key:G,class:"bar-item"},[t("div",Jt,[t("div",{class:"bar-color-dot",style:$({backgroundColor:c.color})},null,4),t("span",Kt,n(c.label),1)]),t("div",Qt,[t("div",{class:"bar-fill",style:$({width:c.percentage+"%",backgroundColor:c.color})},null,4),t("span",Wt,n(c.value),1)])]))),128))])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"6"},{default:o(()=>[e(p,{class:"chart-card",elevation:"2"},{default:o(()=>[e(x,{class:"card-title"},{default:o(()=>[t("div",Xt,[e(d,{class:"title-icon",color:"primary"},{default:o(()=>[...a[12]||(a[12]=[h("mdi-chart-pie",-1)])]),_:1}),t("span",null,n(l(s)("contentStatus")),1)])]),_:1}),e(D,{class:"chart-container"},{default:o(()=>[t("div",Zt,[t("div",ts,[(y(),m("svg",ss,[a[13]||(a[13]=t("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"#e5e7eb","stroke-width":"40"},null,-1)),t("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:P.value.publishedColor,"stroke-width":"40","stroke-dasharray":P.value.publishedDasharray,"stroke-dashoffset":"0",transform:"rotate(-90 100 100)"},null,8,as),t("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:P.value.draftColor,"stroke-width":"40","stroke-dasharray":P.value.draftDasharray,"stroke-dashoffset":P.value.draftOffset,transform:"rotate(-90 100 100)"},null,8,es)])),t("div",os,[t("div",ns,n(E.value),1),t("div",rs,n(l(s)("totalItems")),1)])]),t("div",ls,[t("div",is,[a[14]||(a[14]=t("span",{class:"legend-color",style:{"background-color":"#10b981"}},null,-1)),t("div",cs,[t("span",ds,n(l(s)("published")),1),t("span",us,n(I.value),1)])]),t("div",hs,[a[15]||(a[15]=t("span",{class:"legend-color",style:{"background-color":"#f59e0b"}},null,-1)),t("div",ps,[t("span",_s,n(l(s)("draft")),1),t("span",bs,n(L.value),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1})])}}},ks=Y(vs,[["__scopeId","data-v-faf3e163"]]);export{ks as default};
