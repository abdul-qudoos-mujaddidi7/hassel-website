import{q as C,r as p,c as j,o as A,a as B,b as o,f as u,d as e,l as d,t as r,n as V,F as g,e as f,g as z,w as L,h as E,v as N,i as w,j as l}from"./_plugin-vue_export-helper-P2oMpLHC.js";const D={class:"min-h-screen"},S={key:0,class:"min-h-screen flex items-center justify-center"},T={key:1,class:"min-h-screen flex items-center justify-center"},H={class:"text-center"},R={class:"inline-flex items-center px-4 py-2 bg-red-100 text-red-800 rounded-full mb-4"},F={key:2,class:"min-h-screen"},P={class:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center"},$={class:"text-center w-full"},I={class:"flex items-center justify-center text-sm text-white/80 mb-4"},U={class:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6"},q={key:0,class:"text-xl text-white/90 max-w-3xl"},G={class:"section-padding bg-white"},J={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"mb-8 pb-6 border-b border-gray-200"},O={class:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-4"},Q={class:"flex items-center"},W={class:"flex items-center"},X={key:0,class:"flex items-center"},Y={key:0,class:"flex flex-wrap gap-2"},Z={class:"prose prose-lg max-w-none"},ee=["innerHTML"],te={key:1,class:"text-center py-12 text-gray-500"},se={class:"mt-12 pt-8 border-t border-gray-200"},ae={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},oe={class:"text-sm text-gray-500"},le={key:0,class:"section-padding bg-white"},re={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},ne={class:"space-y-3"},ie={class:"flex items-start justify-between"},ce={class:"flex-1"},de={class:"text-lg font-medium text-gray-900 hover:text-green-600 transition-colors"},ue={class:"text-sm text-gray-500 mt-1"},ve={__name:"NewsDetail",setup(pe){const _=N(),s=p(null),i=p([]),x=p(!0),c=p(null),b=j(()=>{if(!s.value?.content)return 1;const a=200,t=s.value.content.split(" ").length;return Math.max(1,Math.ceil(t/a))}),m=async()=>{try{x.value=!0,c.value=null;const a=_.params.slug;console.log("Fetching article with slug:",a);const t=await w.get(`/api/news/${a}`,{timeout:1e4});if(console.log("Article response:",t.data),t.data&&t.data.news)s.value=t.data.news,i.value=t.data.related_news||[],console.log("Article data:",s.value),console.log("Article content:",s.value?.content);else if(t.data&&t.data.data)s.value=t.data.data,console.log("Article data:",s.value),console.log("Article content:",s.value?.content),await h();else if(t.data)s.value=t.data,console.log("Article data:",s.value),console.log("Article content:",s.value?.content),await h();else{c.value="Article not found";return}}catch(a){console.error("Error fetching article:",a),a.response?.status===404?c.value="Article not found":a.response?.status>=500?c.value="Server error. Please try again later.":c.value="Failed to load article. Please check your connection.",s.value=null,await h()}finally{x.value=!1}},h=async()=>{try{const a=await w.get("/api/news",{params:{limit:3,exclude:s.value?.id,sort:"published_at",order:"desc",status:"published"},timeout:5e3});console.log("Related articles response:",a.data),a.data&&a.data.data?i.value=a.data.data.slice(0,3):Array.isArray(a.data)?i.value=a.data.slice(0,3):i.value=[]}catch(a){console.error("Error fetching related articles:",a),i.value=[]}},y=async()=>{if(navigator.share)try{await navigator.share({title:s.value.title,text:s.value.excerpt,url:window.location.href})}catch(a){console.log("Error sharing:",a)}else try{await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(a){console.log("Error copying to clipboard:",a)}},k=a=>a?a.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>"):"",v=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return A(()=>{m();const a=()=>{m()};window.addEventListener("language:changed",a),B(()=>{window.removeEventListener("language:changed",a)})}),(a,t)=>{const M=E("router-link");return l(),o("div",D,[x.value?(l(),o("div",S,[...t[0]||(t[0]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading article...")],-1)])])):c.value?(l(),o("div",T,[e("div",H,[e("div",R,[t[1]||(t[1]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" "+r(c.value),1)])])])):s.value?(l(),o("div",F,[e("section",{class:"relative h-[500px] md:h-[600px] lg:h-[700px] bg-cover bg-center bg-no-repeat",style:V({backgroundImage:`url(${s.value.featured_image||"https://images.unsplash.com/photo-1500595046743-cd271d694d30?w=1200&h=400&fit=crop&crop=center&auto=format"})`})},[t[3]||(t[3]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/40 to-black/60"},null,-1)),e("div",P,[e("div",$,[e("div",I,[t[2]||(t[2]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),d(" "+r(v(s.value.published_at)),1)]),e("h1",U,r(s.value.title),1),s.value.excerpt?(l(),o("p",q,r(s.value.excerpt),1)):u("",!0)])])],4),e("section",G,[e("div",J,[e("div",K,[e("div",O,[e("div",Q,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),d(" Published: "+r(v(s.value.published_at)),1)]),e("div",W,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" Reading time: "+r(b.value)+" min read ",1)]),s.value.author?(l(),o("div",X,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),d(" By "+r(s.value.author),1)])):u("",!0)]),s.value.tags&&s.value.tags.length>0?(l(),o("div",Y,[(l(!0),o(g,null,f(s.value.tags,n=>(l(),o("span",{key:n,class:"px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full"},r(n),1))),128))])):u("",!0)]),e("div",Z,[s.value.content||s.value.excerpt?(l(),o("div",{key:0,class:"text-gray-700 leading-relaxed whitespace-pre-line",innerHTML:k(s.value.content||s.value.excerpt)},null,8,ee)):(l(),o("div",te,[...t[7]||(t[7]=[e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-lg"}," No content available for this article. ",-1),e("p",{class:"text-sm mt-2"}," The article may be under review or the content is not yet published. ",-1)])]))]),e("div",se,[e("div",ae,[e("div",{class:"flex items-center space-x-4"},[t[9]||(t[9]=e("span",{class:"text-sm text-gray-500"},"Share this article:",-1)),e("button",{onClick:y,class:"inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})],-1),d(" Share ",-1)])])]),e("div",oe," Last updated: "+r(v(s.value.updated_at||s.value.published_at)),1)])])])]),i.value.length>0?(l(),o("section",le,[e("div",re,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"}," Related Articles ",-1)),e("div",ne,[(l(!0),o(g,null,f(i.value.slice(0,3),n=>(l(),o("div",{key:n.id,class:"border-b border-gray-200 pb-3 last:border-b-0"},[z(M,{to:`/news/${n.slug||n.id}`,class:"block hover:bg-gray-50 p-3 rounded-lg transition-colors"},{default:L(()=>[e("div",ie,[e("div",ce,[e("h3",de,r(n.title),1),e("p",ue,r(v(n.published_at)),1)]),t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-gray-400 ml-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]),_:2},1032,["to"])]))),128))])])])):u("",!0)])):u("",!0)])}}},he=C(ve,[["__scopeId","data-v-c85cd6cc"]]);export{he as default};
