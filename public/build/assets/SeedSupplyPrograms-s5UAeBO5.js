import{al as pe,i as H,N as L,r as S,G as ce,q as ne,c as X,y as se,h as v,z as ee,j as E,w as p,g as a,d as r,u as P,t as I,B as oe,D as ie,b as A,f as B,s as K,l as $,o as ge,a0 as me,F as be}from"./_plugin-vue_export-helper-P2oMpLHC.js";import{H as _e}from"./Header-DJrbR-VG.js";import{l as O,u as re,a as fe}from"./admin-DSDDFmjx.js";import{T as V,a as he}from"./TranslationField-oqNUrAFy.js";/* empty css                                                               *//* empty css              */let ue=pe("SeedSupplyProgramsRepository",{state(){return{isEditMode:S(!1),router:ce(),search:S(""),loadingTable:S(!0),loading:S(!0),totalItems:S(0),selectedItems:S([]),itemsPerPage:S(5),createDialog:S(!1),seedSupplyPrograms:L([]),seedSupplyProgramsSearch:S(""),currentSeedSupplyProgram:L({}),statusOptions:L([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),inputTypeOptions:L([{value:"seeds",label:"Seeds"},{value:"fertilizers",label:"Fertilizers"},{value:"pesticides",label:"Pesticides"},{value:"tools",label:"Tools"},{value:"equipment",label:"Equipment"},{value:"machinery",label:"Machinery"}]),qualityGradeOptions:L([{value:"premium",label:"Premium"},{value:"standard",label:"Standard"},{value:"basic",label:"Basic"},{value:"certified",label:"Certified"},{value:"organic",label:"Organic"}]),availabilityOptions:L([{value:"In Stock",label:"In Stock"},{value:"Limited",label:"Limited"},{value:"Out of Stock",label:"Out of Stock"},{value:"Pre-order",label:"Pre-order"}]),targetCropsOptions:L([{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"corn",label:"Corn"},{value:"vegetables",label:"Vegetables"},{value:"fruits",label:"Fruits"},{value:"herbs",label:"Herbs"},{value:"legumes",label:"Legumes"}])}},actions:{setEditMode(m){this.isEditMode=m},getTodaysDate(){const m=new Date,o=m.getFullYear(),i=String(m.getMonth()+1).padStart(2,"0"),u=String(m.getDate()).padStart(2,"0");return`${o}-${i}-${u}`},async fetchSeedSupplyPrograms({page:m=1,itemsPerPage:o=5,status:i=""}){this.loading=!0;try{const u=new URLSearchParams({page:m,perPage:o,search:this.seedSupplyProgramsSearch});i&&u.append("status",i);const q=await H.get(`seed-supply-programs?${u}`);console.log("API Response:",q.data),q.data.success?(this.seedSupplyPrograms=q.data.data||[],this.totalItems=q.data.meta?.total||0):(this.seedSupplyPrograms=[],this.totalItems=0,O.error(q.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(u){console.error("API Error:",u),console.error("Error Response:",u.response?.data),this.seedSupplyPrograms=[],this.totalItems=0,this.loading=!1;const q=u.response?.data?.message||"Failed to fetch seed supply programs";O.error(q,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchSeedSupplyProgram(m){this.loading=!0;try{const o=await H.get(`seed-supply-programs/${m}`,{params:{include_translations:1}});this.currentSeedSupplyProgram=o.data.data,this.loading=!1}catch(o){console.error(o),this.loading=!1,O.error("Failed to fetch seed supply program",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createSeedSupplyProgram(m){try{const o=await H.post("seed-supply-programs",m);this.createDialog=!1,O.success("Seed supply program created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSeedSupplyPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(o){console.error(o);const i=o.response?.data?.message||"Failed to create seed supply program. Please try again.";O.error(i,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateSeedSupplyProgram(m,o){try{const i=await H.post(`seed-supply-programs/${m}`,o,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,O.success("Seed supply program updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSeedSupplyPrograms({page:1,itemsPerPage:this.itemsPerPage}),i}catch(i){console.error(i);const u=i.response?.data?.message||"Failed to update seed supply program. Please try again.";throw O.error(u,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i}},async deleteSeedSupplyProgram(m){try{await H.delete(`seed-supply-programs/${m}`),O.success("Seed supply program deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSeedSupplyPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(o){console.error(o);const i=o.response?.data?.message||"Failed to delete seed supply program. Please try again.";O.error(i,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteSeedSupplyPrograms(m){try{const o=m.map(i=>H.delete(`seed-supply-programs/${i}`));await Promise.all(o),O.success(`${m.length} seed supply programs deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSeedSupplyPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(o){console.error(o),O.error("Failed to delete selected seed supply programs. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(m){try{const o=await H.post(`seed-supply-programs/${m}/toggle-status`);O.success("Seed supply program status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchSeedSupplyPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(o){console.error(o);const i=o.response?.data?.message||"Failed to update seed supply program status. Please try again.";O.error(i,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedSeedSupplyPrograms({page:m=1,itemsPerPage:o=10}){try{const i=new URLSearchParams({page:m,perPage:o,search:this.seedSupplyProgramsSearch});return(await H.get(`seed-supply-programs/published?${i}`)).data}catch(i){return console.error(i),{success:!1,data:[],meta:{total:0}}}},getStatusLabel(m){const o=this.statusOptions.find(i=>i.value===m);return o?o.label:m},formatDate(m){return m?new Date(m).toLocaleDateString():""},resetCurrentSeedSupplyProgram(){this.currentSeedSupplyProgram={id:null,name:"",slug:"",description:"",short_description:"",input_type:"seeds",target_crops:[],quality_grade:"standard",price_range:"",availability:"In Stock",shelf_life:"",distribution_centers:[],usage_instructions:"",technical_specifications:"",supplier:"",contact_info:"",cover_image:"",thumbnail_image:"",status:"draft"}}}});const ve={class:"flex w-100"},ye={class:"flex w-100"},Ve={class:"flex w-100"},Se={class:"flex w-100"},Ce={class:"flex w-100"},$e={class:"flex w-100 image-upload-row mb-4"},Pe={class:"w-50 image-upload-wrapper"},Ue={class:"image-upload-label mb-3 d-block"},ke=["src"],we={class:"photo-overlay"},Ie={class:"w-50 image-upload-wrapper"},Oe={class:"image-upload-label mb-3 d-block"},qe=["src"],Me={class:"photo-overlay"},Ee={class:"w-100"},Be={class:"w-100"},Re={class:"w-100"},ze={class:"w-100"},je={class:"w-100"},He={class:"w-100"},Le={__name:"CreateSeedSupplyProgramTranslatable",setup(m){const{t:o}=re(),i=ue(),u=X(()=>i.isEditMode?o("update"):o("create")),q=X(()=>i.isEditMode?o("update"):o("submit")),N=S(!1),D=["name","short_description","description","input_type","target_crops","distribution_centers","usage_instructions","technical_specifications","supplier","contact_info"],s=L({id:null,name:"",slug:"",description:"",short_description:"",input_type:"seeds",target_crops:[],quality_grade:"standard",price_range:"",availability:"In Stock",shelf_life:"",distribution_centers:[],usage_instructions:"",technical_specifications:"",supplier:"",contact_info:"",cover_image:"",thumbnail_image:"",status:"draft"}),U=S(null),C=S(null),G=S(null),T=S(null),k=S(null),M=S(null),W=S(null),x=S(null),R=X(()=>C.value||s.cover_image||null),z=X(()=>M.value||s.thumbnail_image||null);se(U,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(o("please_select_image")||"Please select a valid image file"),U.value=null,C.value=null;return}if(e.size>3*1024*1024){alert(o("image_too_large")||"Image size must be less than 3MB"),U.value=null,C.value=null;return}s.cover_image="";const y=new FileReader;y.onload=g=>{C.value=g.target.result},y.onerror=()=>{console.error("Error reading file"),C.value=null},y.readAsDataURL(e)}else e||s.cover_image||(C.value=null)}),se(k,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(o("please_select_image")||"Please select a valid image file"),k.value=null,M.value=null;return}if(e.size>3*1024*1024){alert(o("image_too_large")||"Image size must be less than 3MB"),k.value=null,M.value=null;return}s.thumbnail_image="";const y=new FileReader;y.onload=g=>{M.value=g.target.result},y.onerror=()=>{console.error("Error reading file"),M.value=null},y.readAsDataURL(e)}else e||s.thumbnail_image||(M.value=null)}),se(()=>i.currentSeedSupplyProgram,e=>{e&&Object.keys(e).length>0&&(s.id=e.id,s.name=e.name||"",s.slug=e.slug||"",s.description=e.description||"",s.short_description=e.short_description||"",s.input_type=e.input_type||"seeds",s.target_crops=e.target_crops||[],s.quality_grade=e.quality_grade||"standard",s.price_range=e.price_range||"",s.availability=e.availability||"In Stock",s.shelf_life=e.shelf_life||"",s.distribution_centers=e.distribution_centers||[],s.usage_instructions=e.usage_instructions||"",s.technical_specifications=e.technical_specifications||"",s.supplier=e.supplier||"",s.contact_info=e.contact_info||"",s.cover_image=e.cover_image||"",s.thumbnail_image=e.thumbnail_image||"",s.status=e.status||"draft",U.value=null,C.value=s.cover_image||null,T.value=s.cover_image||null,k.value=null,M.value=s.thumbnail_image||null,x.value=s.thumbnail_image||null,s.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}})},{deep:!0,immediate:!0});const le={required:e=>!!e||o("field_required")},ae=()=>{s.name&&!s.slug&&(s.slug=s.name.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},b=()=>{G.value?.click()},h=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(U.value=e.target.files[0])},F=()=>{U.value=null,C.value=null,s.cover_image="",G.value&&(G.value.value="")},Z=()=>{W.value?.click()},J=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(k.value=e.target.files[0])},Q=()=>{k.value=null,M.value=null,s.thumbnail_image="",W.value&&(W.value.value="")},te=async({data:e})=>{N.value=!0;try{const d=new FormData,y=g=>Array.isArray(g)?g.map(c=>typeof c=="object"&&c!==null&&"value"in c?c.value:c).filter(c=>c!=null&&c!==""):g;if(Object.keys(e).forEach(g=>{if(g!=="cover_image"&&g!=="thumbnail_image")if(g==="translations"){const c={...e[g]};["farsi","pashto"].forEach(w=>{c[w]&&(c[w].target_crops&&(c[w].target_crops=y(c[w].target_crops)),c[w].distribution_centers&&(c[w].distribution_centers=y(c[w].distribution_centers)))}),d.append(g,JSON.stringify(c))}else(g==="target_crops"||g==="distribution_centers")&&Array.isArray(e[g])?y(e[g]).forEach((w,j)=>{d.append(`${g}[${j}]`,w)}):e[g]!==null&&e[g]!==void 0&&d.append(g,e[g])}),U.value?d.append("cover_image",U.value):i.isEditMode&&!C.value&&!U.value&&T.value?d.append("cover_image",""):s.cover_image&&!s.cover_image.startsWith("data:")&&!U.value?d.append("cover_image",s.cover_image):i.isEditMode||d.append("cover_image",""),k.value?d.append("thumbnail_image",k.value):i.isEditMode&&!M.value&&!k.value&&x.value?d.append("thumbnail_image",""):s.thumbnail_image&&!s.thumbnail_image.startsWith("data:")&&!k.value?d.append("thumbnail_image",s.thumbnail_image):i.isEditMode||d.append("thumbnail_image",""),i.isEditMode){const g=await i.updateSeedSupplyProgram(s.id,d),c=g?.data?.data||g?.data||{};U.value&&c.cover_image&&(s.cover_image=c.cover_image,C.value=c.cover_image,U.value=null),k.value&&c.thumbnail_image&&(s.thumbnail_image=c.thumbnail_image,M.value=c.thumbnail_image,k.value=null)}else await i.createSeedSupplyProgram(d)}finally{N.value=!1}};return(e,d)=>{const y=v("v-text-field"),g=v("v-select"),c=v("v-icon"),w=v("v-combobox"),j=v("v-textarea");return E(),ee(he,{modelValue:P(i).createDialog,"onUpdate:modelValue":d[2]||(d[2]=l=>P(i).createDialog=l),"form-title":u.value,"button-text":q.value,"translatable-fields":D,"form-data":s,rules:le,saving:N.value,"is-edit-mode":P(i).isEditMode,onSave:te},{"base-fields":p(({formData:l,rules:_})=>[r("div",ve,[a(y,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,variant:"outlined",label:e.$t("name"),density:"compact",class:"pb-4 pr-2 w-75",rules:[_.required],onInput:ae},null,8,["modelValue","onUpdate:modelValue","label","rules"]),a(g,{modelValue:l.status,"onUpdate:modelValue":t=>l.status=t,items:P(i).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),r("div",ye,[a(y,{modelValue:l.slug,"onUpdate:modelValue":t=>l.slug=t,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly_name"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),a(g,{modelValue:l.input_type,"onUpdate:modelValue":t=>l.input_type=t,items:P(i).inputTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("input_type"),class:"pb-4 pl-2 w-50",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),r("div",Ve,[a(g,{modelValue:l.quality_grade,"onUpdate:modelValue":t=>l.quality_grade=t,items:P(i).qualityGradeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("quality_grade"),class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","items","label"]),a(g,{modelValue:l.availability,"onUpdate:modelValue":t=>l.availability=t,items:P(i).availabilityOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("availability"),class:"pb-4 pl-2 w-50",rules:[_.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),r("div",Se,[a(y,{modelValue:l.price_range,"onUpdate:modelValue":t=>l.price_range=t,variant:"outlined",label:e.$t("price_range"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_price_per_kg"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),a(y,{modelValue:l.shelf_life,"onUpdate:modelValue":t=>l.shelf_life=t,variant:"outlined",label:e.$t("shelf_life"),density:"compact",class:"pb-4 pl-2 w-50",hint:e.$t("hint_warranty_period"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",Ce,[a(y,{modelValue:l.supplier,"onUpdate:modelValue":t=>l.supplier=t,variant:"outlined",label:e.$t("supplier"),density:"compact",class:"pb-4 pr-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"]),a(y,{modelValue:l.contact_info,"onUpdate:modelValue":t=>l.contact_info=t,variant:"outlined",label:e.$t("contact_info"),density:"compact",class:"pb-4 pl-2 w-50"},null,8,["modelValue","onUpdate:modelValue","label"])]),r("div",$e,[r("div",Pe,[r("label",Ue,I(e.$t("cover_image")),1),r("div",{class:"photo-upload-container",onClick:d[0]||(d[0]=t=>!R.value&&b())},[r("input",{ref_key:"coverImageInputRef",ref:G,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:h},null,544),oe(r("img",{src:R.value,class:"photo-preview"},null,8,ke),[[ie,R.value!==null]]),r("div",we,[R.value?B("",!0):(E(),A("button",{key:0,type:"button",onClick:K(b,["stop"]),class:"overlay-button"},[a(c,{size:"x-large",color:"blue-grey-lighten-2"},{default:p(()=>[...d[3]||(d[3]=[$("mdi-camera",-1)])]),_:1})])),R.value?(E(),A("button",{key:1,type:"button",onClick:K(F,["stop"]),class:"close-button"},[a(c,{size:"lg",color:"red"},{default:p(()=>[...d[4]||(d[4]=[$("mdi-close",-1)])]),_:1})])):B("",!0),R.value?(E(),A("button",{key:2,type:"button",onClick:K(b,["stop"]),class:"edit-button"},[a(c,{size:"small"},{default:p(()=>[...d[5]||(d[5]=[$("mdi-pencil",-1)])]),_:1})])):B("",!0)])])]),r("div",Ie,[r("label",Oe,I(e.$t("thumbnail_image")),1),r("div",{class:"photo-upload-container",onClick:d[1]||(d[1]=t=>!z.value&&Z())},[r("input",{ref_key:"thumbnailImageInputRef",ref:W,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:J},null,544),oe(r("img",{src:z.value,class:"photo-preview"},null,8,qe),[[ie,z.value!==null]]),r("div",Me,[z.value?B("",!0):(E(),A("button",{key:0,type:"button",onClick:K(Z,["stop"]),class:"overlay-button"},[a(c,{size:"x-large",color:"blue-grey-lighten-2"},{default:p(()=>[...d[6]||(d[6]=[$("mdi-camera",-1)])]),_:1})])),z.value?(E(),A("button",{key:1,type:"button",onClick:K(Q,["stop"]),class:"close-button"},[a(c,{size:"lg",color:"red"},{default:p(()=>[...d[7]||(d[7]=[$("mdi-close",-1)])]),_:1})])):B("",!0),z.value?(E(),A("button",{key:2,type:"button",onClick:K(Z,["stop"]),class:"edit-button"},[a(c,{size:"small"},{default:p(()=>[...d[8]||(d[8]=[$("mdi-pencil",-1)])]),_:1})])):B("",!0)])])])]),r("div",Ee,[a(w,{modelValue:l.target_crops,"onUpdate:modelValue":t=>l.target_crops=t,items:P(i).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_suitable_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),r("div",Be,[a(w,{modelValue:l.distribution_centers,"onUpdate:modelValue":t=>l.distribution_centers=t,variant:"outlined",label:e.$t("distribution_centers"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_distribution_centers"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",Re,[a(j,{modelValue:l.short_description,"onUpdate:modelValue":t=>l.short_description=t,variant:"outlined",label:e.$t("short_description"),density:"compact",class:"pb-4",rows:"3",hint:e.$t("hint_seed_brief"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",ze,[a(j,{modelValue:l.description,"onUpdate:modelValue":t=>l.description=t,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[_.required],rows:"6",hint:e.$t("hint_seed_detailed"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])]),r("div",je,[a(j,{modelValue:l.usage_instructions,"onUpdate:modelValue":t=>l.usage_instructions=t,variant:"outlined",label:e.$t("usage_instructions"),density:"compact",class:"pb-4",rows:"6",hint:e.$t("hint_input_instructions"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),r("div",He,[a(j,{modelValue:l.technical_specifications,"onUpdate:modelValue":t=>l.technical_specifications=t,variant:"outlined",label:e.$t("technical_specifications"),density:"compact",class:"pb-4",rows:"4",hint:e.$t("hint_technical_details"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"farsi-fields":p(({translations:l,clearTranslation:_,hasTranslation:t})=>[a(V,{modelValue:l.name,"onUpdate:modelValue":n=>l.name=n,"field-name":"name","field-label":e.$t("name"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.short_description,"onUpdate:modelValue":n=>l.short_description=n,"field-name":"short_description","field-label":e.$t("short_description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:3,"has-translation":t("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.description,"onUpdate:modelValue":n=>l.description=n,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":t("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.input_type,"onUpdate:modelValue":n=>l.input_type=n,"field-name":"input_type","field-label":e.$t("input_type"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("input_type"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.target_crops,"onUpdate:modelValue":n=>l.target_crops=n,"field-name":"target_crops","field-label":e.$t("target_crops"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("target_crops"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.distribution_centers,"onUpdate:modelValue":n=>l.distribution_centers=n,"field-name":"distribution_centers","field-label":e.$t("distribution_centers"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("distribution_centers"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.usage_instructions,"onUpdate:modelValue":n=>l.usage_instructions=n,"field-name":"usage_instructions","field-label":e.$t("usage_instructions"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:6,"has-translation":t("usage_instructions"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.technical_specifications,"onUpdate:modelValue":n=>l.technical_specifications=n,"field-name":"technical_specifications","field-label":e.$t("technical_specifications"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:4,"has-translation":t("technical_specifications"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.supplier,"onUpdate:modelValue":n=>l.supplier=n,"field-name":"supplier","field-label":e.$t("supplier"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("supplier"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.contact_info,"onUpdate:modelValue":n=>l.contact_info=n,"field-name":"contact_info","field-label":e.$t("contact_info"),language:"farsi","language-label":e.$t("dari"),"has-translation":t("contact_info"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),"pashto-fields":p(({translations:l,clearTranslation:_,hasTranslation:t})=>[a(V,{modelValue:l.name,"onUpdate:modelValue":n=>l.name=n,"field-name":"name","field-label":e.$t("name"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("name"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.short_description,"onUpdate:modelValue":n=>l.short_description=n,"field-name":"short_description","field-label":e.$t("short_description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:3,"has-translation":t("short_description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.description,"onUpdate:modelValue":n=>l.description=n,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":t("description"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.input_type,"onUpdate:modelValue":n=>l.input_type=n,"field-name":"input_type","field-label":e.$t("input_type"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("input_type"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.target_crops,"onUpdate:modelValue":n=>l.target_crops=n,"field-name":"target_crops","field-label":e.$t("target_crops"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("target_crops"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.distribution_centers,"onUpdate:modelValue":n=>l.distribution_centers=n,"field-name":"distribution_centers","field-label":e.$t("distribution_centers"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("distribution_centers"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.usage_instructions,"onUpdate:modelValue":n=>l.usage_instructions=n,"field-name":"usage_instructions","field-label":e.$t("usage_instructions"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:6,"has-translation":t("usage_instructions"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.technical_specifications,"onUpdate:modelValue":n=>l.technical_specifications=n,"field-name":"technical_specifications","field-label":e.$t("technical_specifications"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:4,"has-translation":t("technical_specifications"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.supplier,"onUpdate:modelValue":n=>l.supplier=n,"field-name":"supplier","field-label":e.$t("supplier"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("supplier"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(V,{modelValue:l.contact_info,"onUpdate:modelValue":n=>l.contact_info=n,"field-name":"contact_info","field-label":e.$t("contact_info"),language:"pashto","language-label":e.$t("pashto"),"has-translation":t("contact_info"),onClear:_},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Fe=ne(Le,[["__scopeId","data-v-195251bb"]]),Ae=["dir"],Ne={class:"btn-search pt-12 pb-6"},Ge={class:"text-field w-25"},We={class:"btn flex"},Je={class:"table-section"},Qe={class:"text-center pa-4"},Ye={class:"py-2 pl-4"},Ke={class:"d-flex align-center"},Xe={class:"font-weight-medium"},Ze={class:"text-caption text-grey"},De={class:"py-2 pl-4"},Te={class:"py-2 pl-4"},xe={class:"py-2 pl-4"},el={class:"py-2 pl-4"},ll={__name:"SeedSupplyPrograms",setup(m){const{t:o,locale:i}=re();fe();const u=ue(),q=X(()=>["fa","pa"].includes(i.value)?"rtl":"ltr"),N=S("");let D;const s=()=>{clearTimeout(D),D=setTimeout(()=>{u.fetchSeedSupplyPrograms({page:1,itemsPerPage:u.itemsPerPage,status:N.value})},500)},U=b=>{u.fetchSeedSupplyPrograms({page:b.page,itemsPerPage:b.itemsPerPage,status:N.value})},C=S([]),G=()=>{C.value.length>0&&(u.bulkDeleteSeedSupplyPrograms(C.value),C.value=[])},T=()=>{u.resetCurrentSeedSupplyProgram(),u.isEditMode=!1,u.createDialog=!0},k=b=>{u.isEditMode=!0,u.currentSeedSupplyProgram={...b},u.createDialog=!0},M=async b=>{await u.deleteSeedSupplyProgram(b.id)},W=async b=>{await u.toggleStatus(b.id)},x=b=>{switch(b){case"published":return"success";case"draft":return"warning";case"ongoing":return"info";case"completed":return"primary";case"cancelled":return"error";default:return"primary"}},R=b=>{switch(b){case"In Stock":return"success";case"Limited":return"warning";case"Out of Stock":return"error";case"Pre-order":return"info";default:return"primary"}},z=b=>{const h=u.inputTypeOptions.find(F=>F.value===b);return h?h.label:b},le=b=>{const h=u.qualityGradeOptions.find(F=>F.value===b);return h?h.label:b},ae=X(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:o("name"),key:"name",align:"start",sortable:!0},{title:o("input_type"),key:"input_type",align:"center",sortable:!0},{title:o("status"),key:"status",align:"center",sortable:!0},{title:o("availability"),key:"availability",align:"center",sortable:!0},{title:o("quality_grade"),key:"quality_grade",align:"center",sortable:!0},{title:o("action"),key:"action",align:"center",sortable:!1}]);return ge(()=>{u.fetchSeedSupplyPrograms({page:1,itemsPerPage:u.itemsPerPage})}),(b,h)=>{const F=v("v-divider"),Z=v("v-text-field"),J=v("v-btn"),Q=v("v-icon"),te=v("v-img"),e=v("v-avatar"),d=v("v-chip"),y=v("v-checkbox"),g=v("v-list-item-title"),c=v("v-list-item"),w=v("v-list"),j=v("v-menu"),l=v("v-data-table-server"),_=v("v-col"),t=v("v-row"),n=v("v-main"),de=v("v-app");return E(),A(be,null,[P(u).createDialog?(E(),ee(Fe,{key:0})):B("",!0),r("div",{dir:q.value},[a(_e,{pageTitle:b.$t("seed_supply_programs_management")},null,8,["pageTitle"]),a(F,{thickness:1,class:"border-opacity-100"}),r("div",Ne,[r("div",Ge,[a(Z,{color:"primary",density:"compact",variant:"outlined",label:b.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:P(u).seedSupplyProgramsSearch,"onUpdate:modelValue":h[0]||(h[0]=f=>P(u).seedSupplyProgramsSearch=f),onInput:s},null,8,["label","modelValue"])]),r("div",We,[a(J,{variant:"outlined",color:"primary",class:"px-6"},{default:p(()=>[$(I(P(o)("filter")),1)]),_:1}),h[4]||(h[4]=$(" Â  ",-1)),a(J,{onClick:T,class:"create-btn-gradient px-6",text:b.$t("create")},{default:p(()=>[a(Q,null,{default:p(()=>[...h[3]||(h[3]=[$("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),r("div",Je,[a(de,null,{default:p(()=>[a(n,{class:"main"},{default:p(()=>[a(t,null,{default:p(()=>[a(_,null,{default:p(()=>[a(l,{dir:q.value,theme:"cursor-pointer","items-per-page":P(u).itemsPerPage,"onUpdate:itemsPerPage":h[2]||(h[2]=f=>P(u).itemsPerPage=f),headers:ae.value,"items-length":P(u).totalItems,items:P(u).seedSupplyPrograms,loading:P(u).loading,"onUpdate:options":U,hover:"",class:"w-100 mx-auto"},{"no-data":p(()=>[r("div",Qe,I(b.$t("no_data_available")),1)]),"item.name":p(({item:f})=>[r("td",Ye,[r("div",Ke,[f.cover_image?(E(),ee(e,{key:0,size:"40",class:"mr-3"},{default:p(()=>[a(te,{src:f.cover_image,alt:f.name},null,8,["src","alt"])]),_:2},1024)):B("",!0),r("div",null,[r("div",Xe,I(f.name),1),r("div",Ze,I(f.input_type),1)])])])]),"item.input_type":p(({item:f})=>[r("td",De,[a(d,{color:"primary",size:"small",variant:"outlined"},{default:p(()=>[$(I(z(f.input_type)),1)]),_:2},1024)])]),"item.status":p(({item:f})=>[r("td",Te,[a(d,{color:x(f.status),size:"small",variant:"flat"},{default:p(()=>[$(I(P(u).getStatusLabel(f.status)),1)]),_:2},1032,["color"])])]),"item.availability":p(({item:f})=>[r("td",xe,[a(d,{color:R(f.availability),size:"small",variant:"flat"},{default:p(()=>[$(I(f.availability),1)]),_:2},1032,["color"])])]),"item.quality_grade":p(({item:f})=>[r("td",el,[r("span",null,I(le(f.quality_grade)),1)])]),"item.checkbox":p(({item:f})=>[a(y,{value:f.id,modelValue:C.value,"onUpdate:modelValue":h[1]||(h[1]=Y=>C.value=Y),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":p(({item:f})=>[a(j,null,{activator:p(({props:Y})=>[a(J,me({icon:"mdi-dots-vertical"},Y,{variant:"text"}),null,16)]),default:p(()=>[a(w,null,{default:p(()=>[a(c,null,{default:p(()=>[a(g,{onClick:Y=>k(f),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:p(()=>[a(Q,{color:"tealColor"},{default:p(()=>[...h[5]||(h[5]=[$("mdi-square-edit-outline",-1)])]),_:1}),$(" "+I(b.$t("edit")),1)]),_:1},8,["onClick"]),a(g,{onClick:Y=>W(f),class:"cursor-pointer d-flex gap-3 pb-3"},{default:p(()=>[a(Q,{color:f.status==="published"?"orange":"green"},{default:p(()=>[$(I(f.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),$(" "+I(f.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),a(g,{class:"cursor-pointer d-flex gap-3",onClick:Y=>M(f)},{default:p(()=>[a(Q,{color:"error"},{default:p(()=>[...h[6]||(h[6]=[$("mdi-delete-outline",-1)])]),_:1}),$(" "+I(b.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),C.value.length>0?(E(),ee(J,{key:0,class:"header-button",onClick:G,color:"#B71C1C",flat:"",inset:"",text:`Delete ${C.value.length} selected`},null,8,["text"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,Ae)],64)}}},rl=ne(ll,[["__scopeId","data-v-a7af938c"]]);export{rl as default};
