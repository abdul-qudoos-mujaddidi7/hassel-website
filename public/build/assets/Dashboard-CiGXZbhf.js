import{M as _,o as S,c,h as j,b as o,k as r,g as f,d as e,F as p,e as b,w as M,m as k,t as l,j as n}from"./_plugin-vue_export-helper-Bve7U4QZ.js";import"./admin-DEzJhurF.js";import{H as L}from"./Header-EurA_yJ3.js";/* empty css              *//* empty css                                                               */const T={class:"space-y-8"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},D={class:"flex items-center gap-3"},N={class:"w-10 h-10 bg-gray-100 flex items-center justify-center text-gray-600"},P={class:"text-sm text-gray-500"},$={class:"text-2xl font-semibold text-gray-900"},C={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},B={class:"bg-white border border-gray-200"},F={class:"p-5 max-h-96 overflow-y-auto pr-1"},H={class:"text-gray-900 font-medium truncate"},U={class:"text-sm text-gray-500 ml-4 whitespace-nowrap"},z={class:"space-y-6"},A={class:"bg-white border border-gray-200"},E={class:"p-5 max-h-44 overflow-y-auto pr-1"},q={class:"text-gray-900 font-medium truncate"},G={class:"text-sm text-gray-500 ml-4 whitespace-nowrap"},I={class:"bg-white border border-gray-200"},J={class:"p-5 max-h-44 overflow-y-auto pr-1"},K={class:"text-gray-900 font-medium truncate"},O={class:"text-sm text-gray-500 ml-4 whitespace-nowrap"},tt={__name:"Dashboard",setup(Q){const t=_({news:{total:0,published:0,draft:0},publications:{total:0,published:0,draft:0},successStories:{total:0,published:0},training:{total:0,active:0}}),d=_({news:[],publications:[],successStories:[]});function h(i){if(!i)return"—";try{return new Date(i).toLocaleDateString()}catch{return i}}async function w(){try{const{data:i}=await n.get("dashboard/stats"),s=i?.data||{};t.news.total=s.news?.total??t.news.total,t.news.published=s.news?.published??t.news.published,t.news.draft=s.news?.draft??t.news.draft,t.publications.total=s.publications?.total??t.publications.total,t.publications.published=s.publications?.published??t.publications.published,t.publications.draft=s.publications?.draft??t.publications.draft,t.successStories.total=s.success_stories?.total??t.successStories.total,t.successStories.published=s.success_stories?.published??t.successStories.published,t.training.total=s.training_programs?.total??t.training.total,t.training.active=s.training_programs?.active??t.training.active}catch{try{const[s,u,a,x]=await Promise.all([n.get("/api/news?per_page=1"),n.get("/api/publications?per_page=1"),n.get("/api/success-stories?per_page=1"),n.get("/api/training-programs?per_page=1")]);t.news.total=s?.data?.meta?.total??0,t.publications.total=u?.data?.meta?.total??0,t.successStories.total=a?.data?.meta?.total??0,t.training.total=x?.data?.meta?.total??0}catch{}}}async function y(){try{const[i,s,u]=await Promise.all([n.get("/api/news?per_page=5"),n.get("/api/publications?per_page=5"),n.get("/api/success-stories?per_page=5")]);d.news=i?.data?.data||i?.data||[],d.publications=s?.data?.data||s?.data||[],d.successStories=u?.data?.data||u?.data||[]}catch(i){console.error("Failed to load latest content",i)}}S(async()=>{await Promise.all([w(),y()])});const v=c(()=>[{icon:"mdi-newspaper-variant-outline",label:"News (published)",value:t.news.published},{icon:"mdi-book-outline",label:"Publications (published)",value:t.publications.published},{icon:"mdi-trophy-outline",label:"Success Stories (published)",value:t.successStories.published},{icon:"mdi-school-outline",label:"Training (active)",value:t.training.active}]),g=c(()=>Math.max((t.news.published||0)+(t.news.draft||0),1));c(()=>`${Math.round((t.news.published||0)/g.value*100)}%`),c(()=>`${Math.round((t.news.draft||0)/g.value*100)}%`);const m=c(()=>Math.max((t.publications.published||0)+(t.publications.draft||0),1));return c(()=>`${Math.round((t.publications.published||0)/m.value*100)}%`),c(()=>`${Math.round((t.publications.draft||0)/m.value*100)}%`),(i,s)=>{const u=j("v-icon");return r(),o(p,null,[f(L,{pageTitle:i.$t("dashboard")},null,8,["pageTitle"]),e("div",T,[e("div",V,[(r(!0),o(p,null,b(v.value,a=>(r(),o("div",{key:a.label,class:"bg-white border border-gray-200 p-5 relative"},[s[0]||(s[0]=e("div",{class:"absolute left-0 top-0 h-full w-1 bg-emerald-600"},null,-1)),e("div",D,[e("div",N,[f(u,{size:"22"},{default:M(()=>[k(l(a.icon),1)]),_:2},1024)]),e("div",null,[e("p",P,l(a.label),1),e("p",$,l(a.value??"—"),1)])])]))),128))]),e("div",C,[e("div",B,[s[1]||(s[1]=e("div",{class:"px-5 py-4 border-b border-gray-100 flex items-center justify-between"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Latest News"),e("a",{href:"/admin/news",class:"text-sm text-emerald-700 hover:underline"},"View all")],-1)),e("div",F,[(r(!0),o(p,null,b(d.news,a=>(r(),o("div",{key:a.id,class:"py-2 flex items-center justify-between border-b border-gray-100 last:border-0"},[e("span",H,l(a.title),1),e("span",U,l(h(a.published_date||a.published_at)),1)]))),128))])]),e("div",z,[e("div",A,[s[2]||(s[2]=e("div",{class:"px-5 py-4 border-b border-gray-100 flex items-center justify-between"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Latest Publications"),e("a",{href:"/admin/publications",class:"text-sm text-emerald-700 hover:underline"},"View all")],-1)),e("div",E,[(r(!0),o(p,null,b(d.publications,a=>(r(),o("div",{key:a.id,class:"py-2 flex items-center justify-between border-b border-gray-100 last:border-0"},[e("span",q,l(a.title),1),e("span",G,l(a.file_type&&a.file_type.toUpperCase?a.file_type.toUpperCase():"—"),1)]))),128))])]),e("div",I,[s[3]||(s[3]=e("div",{class:"px-5 py-4 border-b border-gray-100 flex items-center justify-between"},[e("h3",{class:"text-base font-semibold text-gray-900"},"Latest Success Stories"),e("a",{href:"/admin/success-stories",class:"text-sm text-emerald-700 hover:underline"},"View all")],-1)),e("div",J,[(r(!0),o(p,null,b(d.successStories,a=>(r(),o("div",{key:a.id,class:"py-2 flex items-center justify-between border-b border-gray-100 last:border-0"},[e("span",K,l(a.title),1),e("span",O,l(h(a.published_date||a.published_at)),1)]))),128))])])])])])],64)}}};export{tt as default};
