import{al as ue,i as j,N as W,r as b,G as de,q as ie,c as G,y as le,h as f,z as Q,j as C,w as u,g as l,d as o,u as V,t as $,B as se,D as re,b as S,f as T,s as N,l as P,o as pe,a0 as ge,F as oe,e as me}from"./_plugin-vue_export-helper-P2oMpLHC.js";import{H as ve}from"./Header-DJrbR-VG.js";import{l as I,u as ne,a as _e}from"./admin-DSDDFmjx.js";import{T as Z,a as he}from"./TranslationField-oqNUrAFy.js";/* empty css                                                               *//* empty css              */let ce=ue("MarketAccessProgramsRepository",{state(){return{isEditMode:b(!1),router:de(),search:b(""),loadingTable:b(!0),loading:b(!0),totalItems:b(0),selectedItems:b([]),itemsPerPage:b(5),createDialog:b(!1),marketAccessPrograms:W([]),marketAccessProgramsSearch:b(""),currentMarketAccessProgram:W({}),statusOptions:W([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),programTypeOptions:W([{value:"export",label:"Export"},{value:"local_market",label:"Local Market"},{value:"value_chain",label:"Value Chain"},{value:"certification",label:"Certification"},{value:"quality_control",label:"Quality Control"}]),targetCropsOptions:W([{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"corn",label:"Corn"},{value:"vegetables",label:"Vegetables"},{value:"fruits",label:"Fruits"},{value:"herbs",label:"Herbs"},{value:"legumes",label:"Legumes"}])}},actions:{setEditMode(p){this.isEditMode=p},getTodaysDate(){const p=new Date,t=p.getFullYear(),s=String(p.getMonth()+1).padStart(2,"0"),i=String(p.getDate()).padStart(2,"0");return`${t}-${s}-${i}`},async fetchMarketAccessPrograms({page:p=1,itemsPerPage:t=5,status:s=""}){this.loading=!0;try{const i=new URLSearchParams({page:p,perPage:t,search:this.marketAccessProgramsSearch});s&&i.append("status",s);const O=await j.get(`market-access-programs?${i}`);console.log("API Response:",O.data),O.data.success?(this.marketAccessPrograms=O.data.data||[],this.totalItems=O.data.meta?.total||0):(this.marketAccessPrograms=[],this.totalItems=0,I.error(O.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(i){console.error("API Error:",i),console.error("Error Response:",i.response?.data),this.marketAccessPrograms=[],this.totalItems=0,this.loading=!1;const O=i.response?.data?.message||"Failed to fetch market access programs";I.error(O,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchMarketAccessProgram(p){this.loading=!0;try{const t=await j.get(`market-access-programs/${p}`,{params:{include_translations:1}});this.currentMarketAccessProgram=t.data.data,this.loading=!1}catch(t){console.error(t),this.loading=!1,I.error("Failed to fetch market access program",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createMarketAccessProgram(p){try{const t=await j.post("market-access-programs",p);this.createDialog=!1,I.success("Market access program created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(t){console.error(t);const s=t.response?.data?.message||"Failed to create market access program. Please try again.";I.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateMarketAccessProgram(p,t){try{const s=await j.post(`market-access-programs/${p}`,t,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,I.success("Market access program updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage}),s}catch(s){console.error(s);const i=s.response?.data?.message||"Failed to update market access program. Please try again.";throw I.error(i,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s}},async deleteMarketAccessProgram(p){try{await j.delete(`market-access-programs/${p}`),I.success("Market access program deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(t){console.error(t);const s=t.response?.data?.message||"Failed to delete market access program. Please try again.";I.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteMarketAccessPrograms(p){try{const t=p.map(s=>j.delete(`market-access-programs/${s}`));await Promise.all(t),I.success(`${p.length} market access programs deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(t){console.error(t),I.error("Failed to delete selected market access programs. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(p){try{const t=await j.post(`market-access-programs/${p}/toggle-status`);I.success("Market access program status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(t){console.error(t);const s=t.response?.data?.message||"Failed to update market access program status. Please try again.";I.error(s,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedMarketAccessPrograms({page:p=1,itemsPerPage:t=10}){try{const s=new URLSearchParams({page:p,perPage:t,search:this.marketAccessProgramsSearch});return(await j.get(`market-access-programs/published?${s}`)).data}catch(s){return console.error(s),{success:!1,data:[],meta:{total:0}}}},getStatusLabel(p){const t=this.statusOptions.find(s=>s.value===p);return t?t.label:p},formatDate(p){return p?new Date(p).toLocaleDateString():""},resetCurrentMarketAccessProgram(){this.currentMarketAccessProgram={id:null,title:"",slug:"",description:"",cover_image:"",thumbnail_image:"",program_type:"export",target_crops:[],location:"",partner_organizations:[],status:"draft"}}}});const fe={class:"flex w-100"},be={class:"flex w-100"},ye={class:"flex w-100"},ke={class:"flex w-100 image-upload-row mb-4"},Pe={class:"w-50 image-upload-wrapper"},Ve={class:"image-upload-label mb-3 d-block"},Ce=["src"],$e={class:"photo-overlay"},Me={class:"w-50 image-upload-wrapper"},Ae={class:"image-upload-label mb-3 d-block"},Ue=["src"],Ie={class:"photo-overlay"},Oe={class:"w-100"},we={class:"w-100"},ze={class:"w-100"},Se={class:"translation-field mb-4"},Te={class:"translation-field mb-4"},Ee={class:"translation-field mb-4"},xe={class:"translation-field mb-4"},Be={__name:"CreateMarketAccessProgramTranslatable",setup(p){const{t}=ne(),s=ce(),i=G(()=>s.isEditMode?t("update"):t("create")),O=G(()=>s.isEditMode?t("update"):t("submit")),D=b(!1),Y=["title","description","target_crops","partner_organizations"],r=W({id:null,title:"",slug:"",description:"",cover_image:"",thumbnail_image:"",program_type:"export",target_crops:[],location:"",partner_organizations:[],status:"draft"}),M=b(null),k=b(null),F=b(null),K=b(null),A=b(null),w=b(null),L=b(null),X=b(null),x=G(()=>k.value||r.cover_image||null),B=G(()=>w.value||r.thumbnail_image||null);le(M,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(t("please_select_image")||"Please select a valid image file"),M.value=null,k.value=null;return}if(e.size>3*1024*1024){alert(t("image_too_large")||"Image size must be less than 3MB"),M.value=null,k.value=null;return}r.cover_image="";const d=new FileReader;d.onload=g=>{k.value=g.target.result},d.onerror=()=>{console.error("Error reading file"),k.value=null},d.readAsDataURL(e)}else e||r.cover_image||(k.value=null)}),le(A,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(t("please_select_image")||"Please select a valid image file"),A.value=null,w.value=null;return}if(e.size>3*1024*1024){alert(t("image_too_large")||"Image size must be less than 3MB"),A.value=null,w.value=null;return}r.thumbnail_image="";const d=new FileReader;d.onload=g=>{w.value=g.target.result},d.onerror=()=>{console.error("Error reading file"),w.value=null},d.readAsDataURL(e)}else e||r.thumbnail_image||(w.value=null)}),le(()=>s.currentMarketAccessProgram,e=>{e&&Object.keys(e).length>0&&(r.id=e.id,r.title=e.title||"",r.slug=e.slug||"",r.description=e.description||"",r.cover_image=e.cover_image||"",r.thumbnail_image=e.thumbnail_image||"",r.program_type=e.program_type||"export",r.target_crops=e.target_crops||[],r.location=e.location||"",r.partner_organizations=e.partner_organizations||[],r.status=e.status||"draft",M.value=null,k.value=r.cover_image||null,K.value=r.cover_image||null,A.value=null,w.value=r.thumbnail_image||null,X.value=r.thumbnail_image||null,r.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}})},{deep:!0,immediate:!0});const _={required:e=>!!e||t("field_required")},y=()=>{r.title&&!r.slug&&(r.slug=r.title.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},H=()=>{F.value?.click()},ee=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(M.value=e.target.files[0])},q=()=>{M.value=null,k.value=null,r.cover_image="",F.value&&(F.value.value="")},R=()=>{L.value?.click()},te=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(A.value=e.target.files[0])},ae=()=>{A.value=null,w.value=null,r.thumbnail_image="",L.value&&(L.value.value="")},J=async({data:e})=>{D.value=!0;try{const n=new FormData;if(Object.keys(e).forEach(d=>{if(d!=="cover_image"&&d!=="thumbnail_image")if(d==="translations"){const g={...e[d]},v=h=>Array.isArray(h)?h.map(U=>typeof U=="object"&&U!==null&&"value"in U?U.value:U).filter(U=>U!=null&&U!==""):h;["farsi","pashto"].forEach(h=>{g[h]&&(g[h].target_crops&&(g[h].target_crops=v(g[h].target_crops)),g[h].partner_organizations&&(g[h].partner_organizations=v(g[h].partner_organizations)))}),n.append(d,JSON.stringify(g))}else(d==="target_crops"||d==="partner_organizations")&&Array.isArray(e[d])?e[d].map(v=>typeof v=="object"&&v!==null&&"value"in v?v.value:v).filter(v=>v!=null&&v!=="").forEach((v,h)=>{n.append(`${d}[${h}]`,v)}):e[d]!==null&&e[d]!==void 0&&n.append(d,e[d])}),M.value?n.append("cover_image",M.value):s.isEditMode&&!k.value&&!M.value&&K.value?n.append("cover_image",""):r.cover_image&&!r.cover_image.startsWith("data:")&&!M.value?n.append("cover_image",r.cover_image):s.isEditMode||n.append("cover_image",""),A.value?n.append("thumbnail_image",A.value):s.isEditMode&&!w.value&&!A.value&&X.value?n.append("thumbnail_image",""):r.thumbnail_image&&!r.thumbnail_image.startsWith("data:")&&!A.value?n.append("thumbnail_image",r.thumbnail_image):s.isEditMode||n.append("thumbnail_image",""),s.isEditMode){const d=await s.updateMarketAccessProgram(r.id,n),g=d?.data?.data||d?.data||{};M.value&&g.cover_image&&(r.cover_image=g.cover_image,k.value=g.cover_image,M.value=null),A.value&&g.thumbnail_image&&(r.thumbnail_image=g.thumbnail_image,w.value=g.thumbnail_image,A.value=null)}else await s.createMarketAccessProgram(n)}finally{D.value=!1}};return(e,n)=>{const d=f("v-text-field"),g=f("v-select"),v=f("v-icon"),h=f("v-combobox"),U=f("v-textarea");return C(),Q(he,{modelValue:V(s).createDialog,"onUpdate:modelValue":n[2]||(n[2]=c=>V(s).createDialog=c),"form-title":i.value,"button-text":O.value,"translatable-fields":Y,"form-data":r,rules:_,saving:D.value,"is-edit-mode":V(s).isEditMode,onSave:J},{"base-fields":u(({formData:c,rules:z})=>[o("div",fe,[l(d,{modelValue:c.title,"onUpdate:modelValue":m=>c.title=m,variant:"outlined",label:e.$t("title"),density:"compact",class:"pb-4 pr-2 w-75",rules:[z.required],onInput:y},null,8,["modelValue","onUpdate:modelValue","label","rules"]),l(g,{modelValue:c.status,"onUpdate:modelValue":m=>c.status=m,items:V(s).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[z.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),o("div",be,[l(d,{modelValue:c.slug,"onUpdate:modelValue":m=>c.slug=m,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),l(g,{modelValue:c.program_type,"onUpdate:modelValue":m=>c.program_type=m,items:V(s).programTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("program_type"),class:"pb-4 pl-2 w-50",rules:[z.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),o("div",ye,[l(d,{modelValue:c.location,"onUpdate:modelValue":m=>c.location=m,variant:"outlined",label:e.$t("location"),density:"compact",class:"pb-4 w-100"},null,8,["modelValue","onUpdate:modelValue","label"])]),o("div",ke,[o("div",Pe,[o("label",Ve,$(e.$t("cover_image")),1),o("div",{class:"photo-upload-container",onClick:n[0]||(n[0]=m=>!x.value&&H())},[o("input",{ref_key:"coverImageInputRef",ref:F,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:ee},null,544),se(o("img",{src:x.value,class:"photo-preview"},null,8,Ce),[[re,x.value!==null]]),o("div",$e,[x.value?T("",!0):(C(),S("button",{key:0,type:"button",onClick:N(H,["stop"]),class:"overlay-button"},[l(v,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...n[3]||(n[3]=[P("mdi-camera",-1)])]),_:1})])),x.value?(C(),S("button",{key:1,type:"button",onClick:N(q,["stop"]),class:"close-button"},[l(v,{size:"lg",color:"red"},{default:u(()=>[...n[4]||(n[4]=[P("mdi-close",-1)])]),_:1})])):T("",!0),x.value?(C(),S("button",{key:2,type:"button",onClick:N(H,["stop"]),class:"edit-button"},[l(v,{size:"small"},{default:u(()=>[...n[5]||(n[5]=[P("mdi-pencil",-1)])]),_:1})])):T("",!0)])])]),o("div",Me,[o("label",Ae,$(e.$t("thumbnail_image")),1),o("div",{class:"photo-upload-container",onClick:n[1]||(n[1]=m=>!B.value&&R())},[o("input",{ref_key:"thumbnailImageInputRef",ref:L,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:te},null,544),se(o("img",{src:B.value,class:"photo-preview"},null,8,Ue),[[re,B.value!==null]]),o("div",Ie,[B.value?T("",!0):(C(),S("button",{key:0,type:"button",onClick:N(R,["stop"]),class:"overlay-button"},[l(v,{size:"x-large",color:"blue-grey-lighten-2"},{default:u(()=>[...n[6]||(n[6]=[P("mdi-camera",-1)])]),_:1})])),B.value?(C(),S("button",{key:1,type:"button",onClick:N(ae,["stop"]),class:"close-button"},[l(v,{size:"lg",color:"red"},{default:u(()=>[...n[7]||(n[7]=[P("mdi-close",-1)])]),_:1})])):T("",!0),B.value?(C(),S("button",{key:2,type:"button",onClick:N(R,["stop"]),class:"edit-button"},[l(v,{size:"small"},{default:u(()=>[...n[8]||(n[8]=[P("mdi-pencil",-1)])]),_:1})])):T("",!0)])])])]),o("div",Oe,[l(h,{modelValue:c.target_crops,"onUpdate:modelValue":m=>c.target_crops=m,items:V(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",we,[l(h,{modelValue:c.partner_organizations,"onUpdate:modelValue":m=>c.partner_organizations=m,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),o("div",ze,[l(U,{modelValue:c.description,"onUpdate:modelValue":m=>c.description=m,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[z.required],rows:"8",hint:e.$t("hint_market_program_description"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])])]),"farsi-fields":u(({translations:c,clearTranslation:z,hasTranslation:m})=>[l(Z,{modelValue:c.title,"onUpdate:modelValue":a=>c.title=a,"field-name":"title","field-label":e.$t("title"),language:"farsi","language-label":e.$t("dari"),"has-translation":m("title"),onClear:z},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(Z,{modelValue:c.description,"onUpdate:modelValue":a=>c.description=a,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:8,"has-translation":m("description"),onClear:z},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),o("div",Se,[l(h,{modelValue:c.target_crops,"onUpdate:modelValue":a=>c.target_crops=a,items:V(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",Te,[l(h,{modelValue:c.partner_organizations,"onUpdate:modelValue":a=>c.partner_organizations=a,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"pashto-fields":u(({translations:c,clearTranslation:z,hasTranslation:m})=>[l(Z,{modelValue:c.title,"onUpdate:modelValue":a=>c.title=a,"field-name":"title","field-label":e.$t("title"),language:"pashto","language-label":e.$t("pashto"),"has-translation":m("title"),onClear:z},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),l(Z,{modelValue:c.description,"onUpdate:modelValue":a=>c.description=a,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:8,"has-translation":m("description"),onClear:z},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),o("div",Ee,[l(h,{modelValue:c.target_crops,"onUpdate:modelValue":a=>c.target_crops=a,items:V(s).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",xe,[l(h,{modelValue:c.partner_organizations,"onUpdate:modelValue":a=>c.partner_organizations=a,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Re=ie(Be,[["__scopeId","data-v-6ec2ace0"]]),je=["dir"],He={class:"btn-search pt-12 pb-6"},De={class:"text-field w-25"},Fe={class:"btn flex"},Le={class:"table-section"},qe={class:"text-center pa-4"},Ne={class:"py-2 pl-4"},We={class:"d-flex align-center"},Ge={class:"font-weight-medium"},Je={class:"text-caption text-grey"},Qe={class:"py-2 pl-4"},Ye={class:"py-2 pl-4"},Ke={class:"py-2 pl-4"},Xe={class:"py-2 pl-4"},Ze={key:0},et={key:0,class:"text-caption"},tt={key:1},at={__name:"MarketAccessPrograms",setup(p){const{t,locale:s}=ne();_e();const i=ce(),O=G(()=>["fa","pa"].includes(s.value)?"rtl":"ltr"),D=b("");let Y;const r=()=>{clearTimeout(Y),Y=setTimeout(()=>{i.fetchMarketAccessPrograms({page:1,itemsPerPage:i.itemsPerPage,status:D.value})},500)},M=_=>{i.fetchMarketAccessPrograms({page:_.page,itemsPerPage:_.itemsPerPage,status:D.value})},k=b([]),F=()=>{k.value.length>0&&(i.bulkDeleteMarketAccessPrograms(k.value),k.value=[])},K=()=>{i.resetCurrentMarketAccessProgram(),i.isEditMode=!1,i.createDialog=!0},A=_=>{i.isEditMode=!0,i.currentMarketAccessProgram={..._},i.createDialog=!0},w=async _=>{await i.deleteMarketAccessProgram(_.id)},L=async _=>{await i.toggleStatus(_.id)},X=_=>{switch(_){case"published":return"success";case"draft":return"warning";case"ongoing":return"info";case"completed":return"primary";case"cancelled":return"error";default:return"primary"}},x=_=>{const y=i.programTypeOptions.find(H=>H.value===_);return y?y.label:_},B=G(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:t("title"),key:"title",align:"start",sortable:!0},{title:t("program_type"),key:"program_type",align:"center",sortable:!0},{title:t("status"),key:"status",align:"center",sortable:!0},{title:t("location"),key:"location",align:"center",sortable:!0},{title:t("target_crops"),key:"target_crops",align:"center",sortable:!1},{title:t("action"),key:"action",align:"center",sortable:!1}]);return pe(()=>{i.fetchMarketAccessPrograms({page:1,itemsPerPage:i.itemsPerPage})}),(_,y)=>{const H=f("v-divider"),ee=f("v-text-field"),q=f("v-btn"),R=f("v-icon"),te=f("v-img"),ae=f("v-avatar"),J=f("v-chip"),e=f("v-checkbox"),n=f("v-list-item-title"),d=f("v-list-item"),g=f("v-list"),v=f("v-menu"),h=f("v-data-table-server"),U=f("v-col"),c=f("v-row"),z=f("v-main"),m=f("v-app");return C(),S(oe,null,[V(i).createDialog?(C(),Q(Re,{key:0})):T("",!0),o("div",{dir:O.value},[l(ve,{pageTitle:_.$t("market_access_programs_management")},null,8,["pageTitle"]),l(H,{thickness:1,class:"border-opacity-100"}),o("div",He,[o("div",De,[l(ee,{color:"primary",density:"compact",variant:"outlined",label:_.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:V(i).marketAccessProgramsSearch,"onUpdate:modelValue":y[0]||(y[0]=a=>V(i).marketAccessProgramsSearch=a),onInput:r},null,8,["label","modelValue"])]),o("div",Fe,[l(q,{variant:"outlined",color:"primary",class:"px-6"},{default:u(()=>[P($(V(t)("filter")),1)]),_:1}),y[4]||(y[4]=P(" Â  ",-1)),l(q,{onClick:K,class:"create-btn-gradient px-6",text:_.$t("create")},{default:u(()=>[l(R,null,{default:u(()=>[...y[3]||(y[3]=[P("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),o("div",Le,[l(m,null,{default:u(()=>[l(z,{class:"main"},{default:u(()=>[l(c,null,{default:u(()=>[l(U,null,{default:u(()=>[l(h,{dir:O.value,theme:"cursor-pointer","items-per-page":V(i).itemsPerPage,"onUpdate:itemsPerPage":y[2]||(y[2]=a=>V(i).itemsPerPage=a),headers:B.value,"items-length":V(i).totalItems,items:V(i).marketAccessPrograms,loading:V(i).loading,"onUpdate:options":M,hover:"",class:"w-100 mx-auto"},{"no-data":u(()=>[o("div",qe,$(_.$t("no_data_available")),1)]),"item.title":u(({item:a})=>[o("td",Ne,[o("div",We,[a.cover_image?(C(),Q(ae,{key:0,size:"40",class:"mr-3"},{default:u(()=>[l(te,{src:a.cover_image,alt:a.title},null,8,["src","alt"])]),_:2},1024)):T("",!0),o("div",null,[o("div",Ge,$(a.title),1),o("div",Je,$(a.location),1)])])])]),"item.program_type":u(({item:a})=>[o("td",Qe,[l(J,{color:"primary",size:"small",variant:"outlined"},{default:u(()=>[P($(x(a.program_type)),1)]),_:2},1024)])]),"item.status":u(({item:a})=>[o("td",Ye,[l(J,{color:X(a.status),size:"small",variant:"flat"},{default:u(()=>[P($(V(i).getStatusLabel(a.status)),1)]),_:2},1032,["color"])])]),"item.location":u(({item:a})=>[o("td",Ke,[o("span",null,$(a.location||"N/A"),1)])]),"item.target_crops":u(({item:a})=>[o("td",Xe,[a.target_crops&&a.target_crops.length>0?(C(),S("div",Ze,[(C(!0),S(oe,null,me(a.target_crops.slice(0,2),E=>(C(),Q(J,{key:E,size:"x-small",class:"mr-1"},{default:u(()=>[P($(E),1)]),_:2},1024))),128)),a.target_crops.length>2?(C(),S("span",et," +"+$(a.target_crops.length-2)+" more ",1)):T("",!0)])):(C(),S("span",tt,"N/A"))])]),"item.checkbox":u(({item:a})=>[l(e,{value:a.id,modelValue:k.value,"onUpdate:modelValue":y[1]||(y[1]=E=>k.value=E),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":u(({item:a})=>[l(v,null,{activator:u(({props:E})=>[l(q,ge({icon:"mdi-dots-vertical"},E,{variant:"text"}),null,16)]),default:u(()=>[l(g,null,{default:u(()=>[l(d,null,{default:u(()=>[l(n,{onClick:E=>A(a),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:u(()=>[l(R,{color:"tealColor"},{default:u(()=>[...y[5]||(y[5]=[P("mdi-square-edit-outline",-1)])]),_:1}),P(" "+$(_.$t("edit")),1)]),_:1},8,["onClick"]),l(n,{onClick:E=>L(a),class:"cursor-pointer d-flex gap-3 pb-3"},{default:u(()=>[l(R,{color:a.status==="published"?"orange":"green"},{default:u(()=>[P($(a.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),P(" "+$(a.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),l(n,{class:"cursor-pointer d-flex gap-3",onClick:E=>w(a)},{default:u(()=>[l(R,{color:"error"},{default:u(()=>[...y[6]||(y[6]=[P("mdi-delete-outline",-1)])]),_:1}),P(" "+$(_.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),k.value.length>0?(C(),Q(q,{key:0,class:"header-button",onClick:F,color:"#B71C1C",flat:"",inset:"",text:`Delete ${k.value.length} selected`},null,8,["text"])):T("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,je)],64)}}},ct=ie(at,[["__scopeId","data-v-5999ce48"]]);export{ct as default};
