import{r as h,c as A,z as J,o as R,a as $,b as d,d as e,i as D,g as V,w as L,m as v,t as o,u as n,h as q,C as N,al as W,F as x,e as M,ai as G,f as j,k as c}from"./_plugin-vue_export-helper-Bve7U4QZ.js";import{u as K}from"./app-TYN59OvT.js";/* empty css            */const Q={class:"min-h-screen bg-gray-50"},X={class:"relative overflow-hidden"},Y={class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 lg:py-32"},Z={class:"mb-8"},ee={class:"flex items-center space-x-2 text-sm"},te={class:"text-center max-w-4xl mx-auto"},se={class:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-green-500/20 text-green-100 border border-green-400/30 mb-6"},re={class:"text-4xl sm:text-5xl md:text-6xl font-bold text-white mb-6 leading-tight"},oe={class:"text-xl text-white mb-8 leading-relaxed max-w-3xl mx-auto"},ae={class:"flex flex-wrap justify-center gap-6 mb-8"},le={class:"text-center"},ne={class:"text-3xl font-bold text-white"},ie={class:"text-green-200 text-sm"},de={class:"text-center"},ce={class:"text-3xl font-bold text-white"},ue={class:"text-green-200 text-sm"},me={class:"text-center"},ge={class:"text-3xl font-bold text-white"},he={class:"text-green-200 text-sm"},pe={class:"flex flex-col items-center"},ve={class:"text-green-200 text-sm mb-2"},xe={class:"py-8 bg-white border-b border-gray-100"},fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_e={class:"flex items-center justify-between mb-6"},ye={class:"text-2xl font-bold text-gray-900"},be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},we={class:"relative"},ke={class:"block text-sm font-medium text-gray-700 mb-2"},Ce={value:""},Ae=["value"],Me={class:"relative"},je={class:"block text-sm font-medium text-gray-700 mb-2"},Pe={class:"relative"},Se=["placeholder"],Be={class:"flex items-end"},ze={class:"w-full bg-gray-50 rounded-lg px-4 py-3 text-sm text-gray-600"},Ve={class:"font-medium"},Le={class:"py-12 bg-gray-50"},Ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},He={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ee={key:1},Fe={key:0,class:"text-center py-12"},Te={class:"text-xl font-semibold text-gray-900 mb-2"},Ue={class:"text-gray-600 mb-6"},Ie={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Oe={class:"aspect-[16/9] bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg mb-4 flex items-center justify-center"},Je={key:0,class:"w-full h-full"},Re=["src","alt"],$e={key:1,class:"text-center"},De={class:"text-green-600 font-medium"},qe={class:"mb-4 flex-grow"},We={class:"text-lg font-semibold text-gray-900 mb-2"},Ge={class:"text-gray-600 text-sm line-clamp-2"},Ke={class:"flex flex-wrap gap-2 mb-4"},Qe={key:0,class:"px-2 py-1 bg-brand-cream text-brand-primary text-xs font-medium rounded-full"},Xe={key:1,class:"px-2 py-1 bg-brand-cream text-brand-primary text-xs font-medium rounded-full"},Ye={key:2,class:"px-2 py-1 bg-brand-cream text-brand-primary text-xs font-medium rounded-full"},Ze={class:"mt-4"},at={__name:"MarketAccessPrograms",setup(et){const y=h(!0),m=h([]),b=h(0),{currentLanguage:P,onLanguageChange:H,t:a,isRTL:E}=K();let w=null;const u=h({program_type:"",search:""}),g=h([]),p=h([]),F=A(()=>m.value.length),T=A(()=>{const t=m.value.map(l=>l.target_crops).filter(Boolean).flatMap(l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l.split(",").map(s=>s.trim())}return Array.isArray(l)?l:[]});return new Set(t).size}),U=A(()=>{const t=m.value.map(l=>l.partner_organizations).filter(Boolean).flatMap(l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l.split(",").map(s=>s.trim())}return Array.isArray(l)?l:[]});return new Set(t).size});J(u,()=>{k()},{deep:!0}),R(()=>{k(),C(),w=H(()=>{k(),C()})}),$(()=>{typeof w=="function"&&w()});async function k(){y.value=!0;try{const r=new URLSearchParams;u.value.program_type&&r.set("program_type",u.value.program_type),u.value.search&&r.set("search",u.value.search);const t=localStorage.getItem("preferred_language")||P?.value||"en";r.set("lang",t),console.log("Fetching programs with params:",r.toString());const l=await fetch(`/api/market-access-programs?${r.toString()}`);if(!l.ok)throw new Error("Failed to load programs");const s=await l.json();let f=(Array.isArray(s?.data)?s.data:Array.isArray(s)?s:[]).map(i=>({id:i.id,name:i.title||i.name||"Market Access Program",description:i.description||"",short_description:i.description||"",program_type:i.program_type,target_crops:i.target_crops,partner_organizations:i.partner_organizations,location:i.location,cover_image:i.cover_image||i.thumbnail_image,status:i.status||"published",slug:i.slug}));if(u.value.search){const i=u.value.search.toLowerCase();f=f.filter(_=>_.name.toLowerCase().includes(i)||_.description.toLowerCase().includes(i)||_.program_type&&_.program_type.toLowerCase().includes(i))}m.value=f,b.value=m.value.length,p.value.length===0&&(p.value=f,S(p.value)),console.log("Programs loaded:",m.value.length),g.value.length===0&&await C()}catch(r){console.error("Error fetching programs:",r),m.value=[],b.value=0}finally{y.value=!1}}function S(r){if(g.value.length>0)return;const t=new Set;r.forEach(l=>{l.program_type&&t.add(l.program_type)}),g.value=Array.from(t).sort(),console.log("Extracted program types:",g.value)}function B(){u.value={program_type:"",search:""}}function z(r){return String(r).replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}async function C(){try{const r=localStorage.getItem("preferred_language")||P?.value||"en",t=await fetch(`/api/market-access-programs/types?lang=${encodeURIComponent(r)}`);if(!t.ok)throw new Error("Failed to load types");const l=await t.json();g.value=l.types?.map(s=>s.value)||[],console.log("Program types loaded from API:",g.value)}catch(r){console.error("Error fetching program types:",r),p.value.length>0&&S(p.value)}}function I(r){if(!r)return a("market.meta.various");if(typeof r=="string")try{const t=JSON.parse(r);return Array.isArray(t)?t.slice(0,2).join(", "):r}catch{return r.split(",").slice(0,2).join(", ")}return Array.isArray(r)?r.slice(0,2).join(", "):a("market.meta.various")}function O(r){if(!r)return a("market.meta.multiple");if(typeof r=="string")try{const t=JSON.parse(r);return Array.isArray(t)?a("market.meta.partners_count",{count:t.length}):r}catch{return r.split(",").length>1?a("market.meta.partners_count",{count:r.split(",").length}):r}return Array.isArray(r)?a("market.meta.partners_count",{count:r.length}):a("market.meta.multiple")}return(r,t)=>{const l=q("router-link");return c(),d("div",Q,[e("section",X,[t[6]||(t[6]=D('<div class="absolute inset-0"><img src="/images/ourWork/ourworkhero.avif" alt="Market Access Programs" class="w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-br from-green-900/85 via-green-800/80 to-emerald-900/85"></div></div><div class="absolute top-20 right-20 w-32 h-32 bg-white/10 rounded-full blur-xl"></div><div class="absolute bottom-20 left-20 w-24 h-24 bg-green-400/20 rounded-full blur-lg"></div><div class="absolute top-1/2 left-1/4 w-16 h-16 bg-green-400/15 rounded-full blur-md"></div>',4)),e("div",Y,[e("nav",Z,[e("div",ee,[V(l,{to:"/",class:"text-green-200 hover:text-white transition-colors"},{default:L(()=>[v(o(n(a)("market.breadcrumb.home")),1)]),_:1}),t[2]||(t[2]=e("svg",{class:"w-4 h-4 text-green-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),t[3]||(t[3]=e("span",{class:"text-white font-medium"},"Market Access Programs",-1))])]),e("div",te,[e("div",se,[t[4]||(t[4]=e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm8 0a1 1 0 011-1h4a1 1 0 011 1v2a1 1 0 01-1 1h-4a1 1 0 01-1-1V8z"})],-1)),v(" "+o(n(a)("market.badge")),1)]),e("h1",re,o(n(a)("market.title")),1),e("p",oe,o(n(a)("market.subtitle")),1),e("div",ae,[e("div",le,[e("div",ne,o(F.value),1),e("div",ie,o(n(a)("market.stats.active")),1)]),e("div",de,[e("div",ce,o(T.value),1),e("div",ue,o(n(a)("market.stats.crops")),1)]),e("div",me,[e("div",ge,o(U.value),1),e("div",he,o(n(a)("market.stats.partners")),1)])]),e("div",pe,[e("span",ve,o(n(a)("market.scroll")),1),t[5]||(t[5]=e("svg",{class:"w-6 h-6 text-green-300 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1))])])])]),e("section",xe,[e("div",fe,[e("div",_e,[e("h2",ye,o(n(a)("market.filters.title")),1),e("button",{onClick:B,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[t[7]||(t[7]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),v(" "+o(n(a)("market.filters.reset")),1)])]),e("div",be,[e("div",we,[e("label",ke,o(n(a)("market.filters.type")),1),N(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value.program_type=s),class:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"},[e("option",Ce,o(n(a)("market.filters.type_all")),1),(c(!0),d(x,null,M(g.value,s=>(c(),d("option",{key:s,value:s},o(z(s)),9,Ae))),128))],512),[[W,u.value.program_type]])]),e("div",Me,[e("label",je,o(n(a)("market.filters.search")),1),e("div",Pe,[N(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.search=s),type:"text",placeholder:n(a)("market.filters.search_placeholder"),class:"w-full border border-gray-300 rounded-lg px-4 py-3 pl-10 text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"},null,8,Se),[[G,u.value.search]]),t[8]||(t[8]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",Be,[e("div",ze,[e("span",Ve,o(n(a)("market.results.count",{count:b.value})),1)])])])])]),e("section",Le,[e("div",Ne,[y.value?(c(),d("div",He,[(c(),d(x,null,M(6,s=>e("div",{key:"sk-"+s,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 animate-pulse"},[...t[9]||(t[9]=[e("div",{class:"aspect-[16/9] bg-gray-200 rounded-lg mb-4"},null,-1),e("div",{class:"h-6 bg-gray-200 w-3/4 mb-2"},null,-1),e("div",{class:"h-4 bg-gray-100 w-1/2 mb-4"},null,-1),e("div",{class:"h-4 bg-gray-100 w-full"},null,-1)])])),64))])):(c(),d("div",Ee,[m.value.length===0?(c(),d("div",Fe,[t[10]||(t[10]=e("div",{class:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("h3",Te,o(n(a)("market.empty.title")),1),e("p",Ue,o(n(a)("market.empty.body")),1),e("button",{onClick:B,class:"inline-flex items-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors"},o(n(a)("market.empty.clear")),1)])):(c(),d("div",Ie,[(c(!0),d(x,null,M(m.value,s=>(c(),d("div",{key:s.id,class:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-lg transition-shadow flex flex-col"},[e("div",Oe,[s.cover_image?(c(),d("div",Je,[e("img",{src:s.cover_image,alt:s.name,class:"w-full h-full object-cover rounded-lg"},null,8,Re)])):(c(),d("div",$e,[t[11]||(t[11]=e("svg",{class:"w-16 h-16 text-green-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("p",De,o(s.program_type||"Program"),1)]))]),e("div",qe,[e("h3",We,o(s.name),1),e("p",Ge,o(s.short_description||s.description),1)]),e("div",Ke,[s.program_type?(c(),d("span",Qe,o(z(s.program_type)),1)):j("",!0),s.target_crops?(c(),d("span",Xe,o(I(s.target_crops)),1)):j("",!0),s.partner_organizations?(c(),d("span",Ye,o(O(s.partner_organizations)),1)):j("",!0)]),e("div",Ze,[V(l,{to:`/market-access/${s.slug||s.id}`,class:"w-full bg-brand-primary text-white font-semibold py-3 px-4 rounded-lg hover:bg-brand-secondary transition-all duration-200 text-sm text-center shadow-sm hover:shadow-md block inline-flex items-center justify-center"},{default:L(()=>[n(E)?(c(),d(x,{key:1},[t[13]||(t[13]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),v(" "+o(n(a)("common.view_details")),1)],64)):(c(),d(x,{key:0},[v(o(n(a)("common.view_details"))+" ",1),t[12]||(t[12]=e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],64))]),_:1},8,["to"])])]))),128))]))]))])])])}}};export{at as default};
