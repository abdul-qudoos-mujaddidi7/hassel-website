import{al as ue,i as j,N as W,r as b,G as de,q as ie,c as G,y as le,h as f,z as Q,j as C,w as c,g as a,d as o,u as V,t as $,B as se,D as re,b as S,f as T,s as N,l as P,o as pe,a0 as ge,F as oe,e as me}from"./_plugin-vue_export-helper-P6s7mfAX.js";import{H as ve}from"./Header-Dc2gjrUc.js";import{l as I,u as ne,a as _e}from"./admin-C1tUPR0Q.js";import{T as Z,a as he}from"./TranslationField-DYZ6aUjw.js";/* empty css                                                               *//* empty css              */let ce=ue("MarketAccessProgramsRepository",{state(){return{isEditMode:b(!1),router:de(),search:b(""),loadingTable:b(!0),loading:b(!0),totalItems:b(0),selectedItems:b([]),itemsPerPage:b(5),createDialog:b(!1),marketAccessPrograms:W([]),marketAccessProgramsSearch:b(""),currentMarketAccessProgram:W({}),statusOptions:W([{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]),programTypeOptions:W([{value:"export",label:"Export"},{value:"local_market",label:"Local Market"},{value:"value_chain",label:"Value Chain"},{value:"certification",label:"Certification"},{value:"quality_control",label:"Quality Control"}]),targetCropsOptions:W([{value:"wheat",label:"Wheat"},{value:"rice",label:"Rice"},{value:"corn",label:"Corn"},{value:"vegetables",label:"Vegetables"},{value:"fruits",label:"Fruits"},{value:"herbs",label:"Herbs"},{value:"legumes",label:"Legumes"}])}},actions:{setEditMode(p){this.isEditMode=p},getTodaysDate(){const p=new Date,s=p.getFullYear(),l=String(p.getMonth()+1).padStart(2,"0"),u=String(p.getDate()).padStart(2,"0");return`${s}-${l}-${u}`},async fetchMarketAccessPrograms({page:p=1,itemsPerPage:s=5,status:l=""}){this.loading=!0;try{const u=new URLSearchParams({page:p,perPage:s,search:this.marketAccessProgramsSearch});l&&u.append("status",l);const z=await j.get(`market-access-programs?${u}`);z.data.success?(this.marketAccessPrograms=z.data.data||[],this.totalItems=z.data.meta?.total||0):(this.marketAccessPrograms=[],this.totalItems=0,I.error(z.data.message||"Failed to fetch data",{position:"top-right",autoClose:3e3})),this.loading=!1}catch(u){this.marketAccessPrograms=[],this.totalItems=0,this.loading=!1;const z=u.response?.data?.message||"Failed to fetch market access programs";I.error(z,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async fetchMarketAccessProgram(p){this.loading=!0;try{const s=await j.get(`market-access-programs/${p}`,{params:{include_translations:1}});this.currentMarketAccessProgram=s.data.data,this.loading=!1}catch{this.loading=!1,I.error("Failed to fetch market access program",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async createMarketAccessProgram(p){try{const s=await j.post("market-access-programs",p);this.createDialog=!1,I.success("Market access program created successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(s){const l=s.response?.data?.message||"Failed to create market access program. Please try again.";I.error(l,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async updateMarketAccessProgram(p,s){try{const l=await j.post(`market-access-programs/${p}`,s,{headers:{_method:"PUT"}});return this.createDialog=!1,this.isEditMode=!1,I.success("Market access program updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage}),l}catch(l){const u=l.response?.data?.message||"Failed to update market access program. Please try again.";throw I.error(u,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l}},async deleteMarketAccessProgram(p){try{await j.delete(`market-access-programs/${p}`),I.success("Market access program deleted successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(s){const l=s.response?.data?.message||"Failed to delete market access program. Please try again.";I.error(l,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async bulkDeleteMarketAccessPrograms(p){try{const s=p.map(l=>j.delete(`market-access-programs/${l}`));await Promise.all(s),I.success(`${p.length} market access programs deleted successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch{I.error("Failed to delete selected market access programs. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async toggleStatus(p){try{const s=await j.post(`market-access-programs/${p}/toggle-status`);I.success("Market access program status updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),this.fetchMarketAccessPrograms({page:1,itemsPerPage:this.itemsPerPage})}catch(s){const l=s.response?.data?.message||"Failed to update market access program status. Please try again.";I.error(l,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},async getPublishedMarketAccessPrograms({page:p=1,itemsPerPage:s=10}){try{const l=new URLSearchParams({page:p,perPage:s,search:this.marketAccessProgramsSearch});return(await j.get(`market-access-programs/published?${l}`)).data}catch{return{success:!1,data:[],meta:{total:0}}}},getStatusLabel(p){const s=this.statusOptions.find(l=>l.value===p);return s?s.label:p},formatDate(p){return p?new Date(p).toLocaleDateString():""},resetCurrentMarketAccessProgram(){this.currentMarketAccessProgram={id:null,title:"",slug:"",description:"",cover_image:"",thumbnail_image:"",program_type:"export",target_crops:[],location:"",partner_organizations:[],status:"draft"}}}});const fe={class:"flex w-100"},be={class:"flex w-100"},ye={class:"flex w-100"},ke={class:"flex w-100 image-upload-row mb-4"},Pe={class:"w-50 image-upload-wrapper"},Ve={class:"image-upload-label mb-3 d-block"},Ce=["src"],$e={class:"photo-overlay"},Me={class:"w-50 image-upload-wrapper"},Ae={class:"image-upload-label mb-3 d-block"},Ue=["src"],Ie={class:"photo-overlay"},Oe={class:"w-100"},we={class:"w-100"},ze={class:"w-100"},Se={class:"translation-field mb-4"},Te={class:"translation-field mb-4"},Ee={class:"translation-field mb-4"},xe={class:"translation-field mb-4"},Be={__name:"CreateMarketAccessProgramTranslatable",setup(p){const{t:s}=ne(),l=ce(),u=G(()=>l.isEditMode?s("update"):s("create")),z=G(()=>l.isEditMode?s("update"):s("submit")),D=b(!1),Y=["title","description","target_crops","partner_organizations"],r=W({id:null,title:"",slug:"",description:"",cover_image:"",thumbnail_image:"",program_type:"export",target_crops:[],location:"",partner_organizations:[],status:"draft"}),M=b(null),k=b(null),F=b(null),K=b(null),A=b(null),O=b(null),L=b(null),X=b(null),x=G(()=>k.value||r.cover_image||null),B=G(()=>O.value||r.thumbnail_image||null);le(M,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(s("please_select_image")||"Please select a valid image file"),M.value=null,k.value=null;return}if(e.size>3*1024*1024){alert(s("image_too_large")||"Image size must be less than 3MB"),M.value=null,k.value=null;return}r.cover_image="";const d=new FileReader;d.onload=g=>{k.value=g.target.result},d.onerror=()=>{k.value=null},d.readAsDataURL(e)}else e||r.cover_image||(k.value=null)}),le(A,e=>{if(e&&e instanceof File){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e.type)){alert(s("please_select_image")||"Please select a valid image file"),A.value=null,O.value=null;return}if(e.size>3*1024*1024){alert(s("image_too_large")||"Image size must be less than 3MB"),A.value=null,O.value=null;return}r.thumbnail_image="";const d=new FileReader;d.onload=g=>{O.value=g.target.result},d.onerror=()=>{O.value=null},d.readAsDataURL(e)}else e||r.thumbnail_image||(O.value=null)}),le(()=>l.currentMarketAccessProgram,e=>{e&&Object.keys(e).length>0&&(r.id=e.id,r.title=e.title||"",r.slug=e.slug||"",r.description=e.description||"",r.cover_image=e.cover_image||"",r.thumbnail_image=e.thumbnail_image||"",r.program_type=e.program_type||"export",r.target_crops=e.target_crops||[],r.location=e.location||"",r.partner_organizations=e.partner_organizations||[],r.status=e.status||"draft",M.value=null,k.value=r.cover_image||null,K.value=r.cover_image||null,A.value=null,O.value=r.thumbnail_image||null,X.value=r.thumbnail_image||null,r.translationData={...e,farsi_translations:e.farsi_translations||{},pashto_translations:e.pashto_translations||{}})},{deep:!0,immediate:!0});const _={required:e=>!!e||s("field_required")},y=()=>{r.title&&!r.slug&&(r.slug=r.title.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"))},H=()=>{F.value?.click()},ee=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(M.value=e.target.files[0])},q=()=>{M.value=null,k.value=null,r.cover_image="",F.value&&(F.value.value="")},R=()=>{L.value?.click()},te=e=>{e&&e.target&&e.target.files&&e.target.files.length>0&&(A.value=e.target.files[0])},ae=()=>{A.value=null,O.value=null,r.thumbnail_image="",L.value&&(L.value.value="")},J=async({data:e})=>{D.value=!0;try{const i=new FormData;if(Object.keys(e).forEach(d=>{if(d!=="cover_image"&&d!=="thumbnail_image")if(d==="translations"){const g={...e[d]},v=h=>Array.isArray(h)?h.map(U=>typeof U=="object"&&U!==null&&"value"in U?U.value:U).filter(U=>U!=null&&U!==""):h;["farsi","pashto"].forEach(h=>{g[h]&&(g[h].target_crops&&(g[h].target_crops=v(g[h].target_crops)),g[h].partner_organizations&&(g[h].partner_organizations=v(g[h].partner_organizations)))}),i.append(d,JSON.stringify(g))}else(d==="target_crops"||d==="partner_organizations")&&Array.isArray(e[d])?e[d].map(v=>typeof v=="object"&&v!==null&&"value"in v?v.value:v).filter(v=>v!=null&&v!=="").forEach((v,h)=>{i.append(`${d}[${h}]`,v)}):e[d]!==null&&e[d]!==void 0&&i.append(d,e[d])}),M.value?i.append("cover_image",M.value):l.isEditMode&&!k.value&&!M.value&&K.value?i.append("cover_image",""):r.cover_image&&!r.cover_image.startsWith("data:")&&!M.value?i.append("cover_image",r.cover_image):l.isEditMode||i.append("cover_image",""),A.value?i.append("thumbnail_image",A.value):l.isEditMode&&!O.value&&!A.value&&X.value?i.append("thumbnail_image",""):r.thumbnail_image&&!r.thumbnail_image.startsWith("data:")&&!A.value?i.append("thumbnail_image",r.thumbnail_image):l.isEditMode||i.append("thumbnail_image",""),l.isEditMode){const d=await l.updateMarketAccessProgram(r.id,i),g=d?.data?.data||d?.data||{};M.value&&g.cover_image&&(r.cover_image=g.cover_image,k.value=g.cover_image,M.value=null),A.value&&g.thumbnail_image&&(r.thumbnail_image=g.thumbnail_image,O.value=g.thumbnail_image,A.value=null)}else await l.createMarketAccessProgram(i)}finally{D.value=!1}};return(e,i)=>{const d=f("v-text-field"),g=f("v-select"),v=f("v-icon"),h=f("v-combobox"),U=f("v-textarea");return C(),Q(he,{modelValue:V(l).createDialog,"onUpdate:modelValue":i[2]||(i[2]=n=>V(l).createDialog=n),"form-title":u.value,"button-text":z.value,"translatable-fields":Y,"form-data":r,rules:_,saving:D.value,"is-edit-mode":V(l).isEditMode,onSave:J},{"base-fields":c(({formData:n,rules:w})=>[o("div",fe,[a(d,{modelValue:n.title,"onUpdate:modelValue":m=>n.title=m,variant:"outlined",label:e.$t("title"),density:"compact",class:"pb-4 pr-2 w-75",rules:[w.required],onInput:y},null,8,["modelValue","onUpdate:modelValue","label","rules"]),a(g,{modelValue:n.status,"onUpdate:modelValue":m=>n.status=m,items:V(l).statusOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("status"),class:"pb-4 pl-2 w-25",rules:[w.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),o("div",be,[a(d,{modelValue:n.slug,"onUpdate:modelValue":m=>n.slug=m,variant:"outlined",label:e.$t("slug"),density:"compact",class:"pb-4 pr-2 w-50",hint:e.$t("hint_url_friendly"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"]),a(g,{modelValue:n.program_type,"onUpdate:modelValue":m=>n.program_type=m,items:V(l).programTypeOptions,variant:"outlined",density:"compact","item-value":"value","item-title":"label","return-object":!1,label:e.$t("program_type"),class:"pb-4 pl-2 w-50",rules:[w.required]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])]),o("div",ye,[a(d,{modelValue:n.location,"onUpdate:modelValue":m=>n.location=m,variant:"outlined",label:e.$t("location"),density:"compact",class:"pb-4 w-100"},null,8,["modelValue","onUpdate:modelValue","label"])]),o("div",ke,[o("div",Pe,[o("label",Ve,$(e.$t("cover_image")),1),o("div",{class:"photo-upload-container",onClick:i[0]||(i[0]=m=>!x.value&&H())},[o("input",{ref_key:"coverImageInputRef",ref:F,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:ee},null,544),se(o("img",{src:x.value,class:"photo-preview"},null,8,Ce),[[re,x.value!==null]]),o("div",$e,[x.value?T("",!0):(C(),S("button",{key:0,type:"button",onClick:N(H,["stop"]),class:"overlay-button"},[a(v,{size:"x-large",color:"blue-grey-lighten-2"},{default:c(()=>[...i[3]||(i[3]=[P("mdi-camera",-1)])]),_:1})])),x.value?(C(),S("button",{key:1,type:"button",onClick:N(q,["stop"]),class:"close-button"},[a(v,{size:"lg",color:"red"},{default:c(()=>[...i[4]||(i[4]=[P("mdi-close",-1)])]),_:1})])):T("",!0),x.value?(C(),S("button",{key:2,type:"button",onClick:N(H,["stop"]),class:"edit-button"},[a(v,{size:"small"},{default:c(()=>[...i[5]||(i[5]=[P("mdi-pencil",-1)])]),_:1})])):T("",!0)])])]),o("div",Me,[o("label",Ae,$(e.$t("thumbnail_image")),1),o("div",{class:"photo-upload-container",onClick:i[1]||(i[1]=m=>!B.value&&R())},[o("input",{ref_key:"thumbnailImageInputRef",ref:L,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},onChange:te},null,544),se(o("img",{src:B.value,class:"photo-preview"},null,8,Ue),[[re,B.value!==null]]),o("div",Ie,[B.value?T("",!0):(C(),S("button",{key:0,type:"button",onClick:N(R,["stop"]),class:"overlay-button"},[a(v,{size:"x-large",color:"blue-grey-lighten-2"},{default:c(()=>[...i[6]||(i[6]=[P("mdi-camera",-1)])]),_:1})])),B.value?(C(),S("button",{key:1,type:"button",onClick:N(ae,["stop"]),class:"close-button"},[a(v,{size:"lg",color:"red"},{default:c(()=>[...i[7]||(i[7]=[P("mdi-close",-1)])]),_:1})])):T("",!0),B.value?(C(),S("button",{key:2,type:"button",onClick:N(R,["stop"]),class:"edit-button"},[a(v,{size:"small"},{default:c(()=>[...i[8]||(i[8]=[P("mdi-pencil",-1)])]),_:1})])):T("",!0)])])])]),o("div",Oe,[a(h,{modelValue:n.target_crops,"onUpdate:modelValue":m=>n.target_crops=m,items:V(l).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",we,[a(h,{modelValue:n.partner_organizations,"onUpdate:modelValue":m=>n.partner_organizations=m,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])]),o("div",ze,[a(U,{modelValue:n.description,"onUpdate:modelValue":m=>n.description=m,variant:"outlined",label:e.$t("description"),density:"compact",class:"pb-4",rules:[w.required],rows:"8",hint:e.$t("hint_market_program_description"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","rules","hint"])])]),"farsi-fields":c(({translations:n,clearTranslation:w,hasTranslation:m})=>[a(Z,{modelValue:n.title,"onUpdate:modelValue":t=>n.title=t,"field-name":"title","field-label":e.$t("title"),language:"farsi","language-label":e.$t("dari"),"has-translation":m("title"),onClear:w},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(Z,{modelValue:n.description,"onUpdate:modelValue":t=>n.description=t,"field-name":"description","field-label":e.$t("description"),language:"farsi","language-label":e.$t("dari"),"field-type":"textarea",rows:8,"has-translation":m("description"),onClear:w},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),o("div",Se,[a(h,{modelValue:n.target_crops,"onUpdate:modelValue":t=>n.target_crops=t,items:V(l).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",Te,[a(h,{modelValue:n.partner_organizations,"onUpdate:modelValue":t=>n.partner_organizations=t,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),"pashto-fields":c(({translations:n,clearTranslation:w,hasTranslation:m})=>[a(Z,{modelValue:n.title,"onUpdate:modelValue":t=>n.title=t,"field-name":"title","field-label":e.$t("title"),language:"pashto","language-label":e.$t("pashto"),"has-translation":m("title"),onClear:w},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),a(Z,{modelValue:n.description,"onUpdate:modelValue":t=>n.description=t,"field-name":"description","field-label":e.$t("description"),language:"pashto","language-label":e.$t("pashto"),"field-type":"textarea",rows:8,"has-translation":m("description"),onClear:w},null,8,["modelValue","onUpdate:modelValue","field-label","language-label","has-translation","onClear"]),o("div",Ee,[a(h,{modelValue:n.target_crops,"onUpdate:modelValue":t=>n.target_crops=t,items:V(l).targetCropsOptions,"item-value":"value","item-title":"label",variant:"outlined",label:e.$t("target_crops"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_target_crops"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","items","label","hint"])]),o("div",xe,[a(h,{modelValue:n.partner_organizations,"onUpdate:modelValue":t=>n.partner_organizations=t,variant:"outlined",label:e.$t("partner_organizations"),density:"compact",class:"pb-4",multiple:"",chips:"",hint:e.$t("hint_partner_organizations"),"persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","label","hint"])])]),_:1},8,["modelValue","form-title","button-text","form-data","saving","is-edit-mode"])}}},Re=ie(Be,[["__scopeId","data-v-6ec2ace0"]]),je=["dir"],He={class:"btn-search pt-12 pb-6"},De={class:"text-field w-25"},Fe={class:"btn flex"},Le={class:"table-section"},qe={class:"text-center pa-4"},Ne={class:"py-2 pl-4"},We={class:"d-flex align-center"},Ge={class:"font-weight-medium"},Je={class:"text-caption text-grey"},Qe={class:"py-2 pl-4"},Ye={class:"py-2 pl-4"},Ke={class:"py-2 pl-4"},Xe={class:"py-2 pl-4"},Ze={key:0},et={key:0,class:"text-caption"},tt={key:1},at={__name:"MarketAccessPrograms",setup(p){const{t:s,locale:l}=ne();_e();const u=ce(),z=G(()=>["fa","pa"].includes(l.value)?"rtl":"ltr"),D=b("");let Y;const r=()=>{clearTimeout(Y),Y=setTimeout(()=>{u.fetchMarketAccessPrograms({page:1,itemsPerPage:u.itemsPerPage,status:D.value})},500)},M=_=>{u.fetchMarketAccessPrograms({page:_.page,itemsPerPage:_.itemsPerPage,status:D.value})},k=b([]),F=()=>{k.value.length>0&&(u.bulkDeleteMarketAccessPrograms(k.value),k.value=[])},K=()=>{u.resetCurrentMarketAccessProgram(),u.isEditMode=!1,u.createDialog=!0},A=_=>{u.isEditMode=!0,u.currentMarketAccessProgram={..._},u.createDialog=!0},O=async _=>{await u.deleteMarketAccessProgram(_.id)},L=async _=>{await u.toggleStatus(_.id)},X=_=>{switch(_){case"published":return"success";case"draft":return"warning";case"ongoing":return"info";case"completed":return"primary";case"cancelled":return"error";default:return"primary"}},x=_=>{const y=u.programTypeOptions.find(H=>H.value===_);return y?y.label:_},B=G(()=>[{title:"",key:"checkbox",align:"start",sortable:!1},{title:s("title"),key:"title",align:"start",sortable:!0},{title:s("program_type"),key:"program_type",align:"center",sortable:!0},{title:s("status"),key:"status",align:"center",sortable:!0},{title:s("location"),key:"location",align:"center",sortable:!0},{title:s("target_crops"),key:"target_crops",align:"center",sortable:!1},{title:s("action"),key:"action",align:"center",sortable:!1}]);return pe(()=>{u.fetchMarketAccessPrograms({page:1,itemsPerPage:u.itemsPerPage})}),(_,y)=>{const H=f("v-divider"),ee=f("v-text-field"),q=f("v-btn"),R=f("v-icon"),te=f("v-img"),ae=f("v-avatar"),J=f("v-chip"),e=f("v-checkbox"),i=f("v-list-item-title"),d=f("v-list-item"),g=f("v-list"),v=f("v-menu"),h=f("v-data-table-server"),U=f("v-col"),n=f("v-row"),w=f("v-main"),m=f("v-app");return C(),S(oe,null,[V(u).createDialog?(C(),Q(Re,{key:0})):T("",!0),o("div",{dir:z.value},[a(ve,{pageTitle:_.$t("market_access_programs_management")},null,8,["pageTitle"]),a(H,{thickness:1,class:"border-opacity-100"}),o("div",He,[o("div",De,[a(ee,{color:"primary",density:"compact",variant:"outlined",label:_.$t("search"),"append-inner-icon":"mdi-magnify","hide-details":"",modelValue:V(u).marketAccessProgramsSearch,"onUpdate:modelValue":y[0]||(y[0]=t=>V(u).marketAccessProgramsSearch=t),onInput:r},null,8,["label","modelValue"])]),o("div",Fe,[a(q,{variant:"outlined",color:"primary",class:"px-6"},{default:c(()=>[P($(V(s)("filter")),1)]),_:1}),y[4]||(y[4]=P(" Â  ",-1)),a(q,{onClick:K,class:"create-btn-gradient px-6",text:_.$t("create")},{default:c(()=>[a(R,null,{default:c(()=>[...y[3]||(y[3]=[P("mdi-plus",-1)])]),_:1})]),_:1},8,["text"])])]),o("div",Le,[a(m,null,{default:c(()=>[a(w,{class:"main"},{default:c(()=>[a(n,null,{default:c(()=>[a(U,null,{default:c(()=>[a(h,{dir:z.value,theme:"cursor-pointer","items-per-page":V(u).itemsPerPage,"onUpdate:itemsPerPage":y[2]||(y[2]=t=>V(u).itemsPerPage=t),headers:B.value,"items-length":V(u).totalItems,items:V(u).marketAccessPrograms,loading:V(u).loading,"onUpdate:options":M,hover:"",class:"w-100 mx-auto"},{"no-data":c(()=>[o("div",qe,$(_.$t("no_data_available")),1)]),"item.title":c(({item:t})=>[o("td",Ne,[o("div",We,[t.cover_image?(C(),Q(ae,{key:0,size:"40",class:"mr-3"},{default:c(()=>[a(te,{src:t.cover_image,alt:t.title},null,8,["src","alt"])]),_:2},1024)):T("",!0),o("div",null,[o("div",Ge,$(t.title),1),o("div",Je,$(t.location),1)])])])]),"item.program_type":c(({item:t})=>[o("td",Qe,[a(J,{color:"primary",size:"small",variant:"outlined"},{default:c(()=>[P($(x(t.program_type)),1)]),_:2},1024)])]),"item.status":c(({item:t})=>[o("td",Ye,[a(J,{color:X(t.status),size:"small",variant:"flat"},{default:c(()=>[P($(V(u).getStatusLabel(t.status)),1)]),_:2},1032,["color"])])]),"item.location":c(({item:t})=>[o("td",Ke,[o("span",null,$(t.location||"N/A"),1)])]),"item.target_crops":c(({item:t})=>[o("td",Xe,[t.target_crops&&t.target_crops.length>0?(C(),S("div",Ze,[(C(!0),S(oe,null,me(t.target_crops.slice(0,2),E=>(C(),Q(J,{key:E,size:"x-small",class:"mr-1"},{default:c(()=>[P($(E),1)]),_:2},1024))),128)),t.target_crops.length>2?(C(),S("span",et," +"+$(t.target_crops.length-2)+" more ",1)):T("",!0)])):(C(),S("span",tt,"N/A"))])]),"item.checkbox":c(({item:t})=>[a(e,{value:t.id,modelValue:k.value,"onUpdate:modelValue":y[1]||(y[1]=E=>k.value=E),class:"w-6 d-flex"},null,8,["value","modelValue"])]),"item.action":c(({item:t})=>[a(v,null,{activator:c(({props:E})=>[a(q,ge({icon:"mdi-dots-vertical"},E,{variant:"text"}),null,16)]),default:c(()=>[a(g,null,{default:c(()=>[a(d,null,{default:c(()=>[a(i,{onClick:E=>A(t),class:"cursor-pointer d-flex gap-3 justify-left pb-3"},{default:c(()=>[a(R,{color:"tealColor"},{default:c(()=>[...y[5]||(y[5]=[P("mdi-square-edit-outline",-1)])]),_:1}),P(" "+$(_.$t("edit")),1)]),_:1},8,["onClick"]),a(i,{onClick:E=>L(t),class:"cursor-pointer d-flex gap-3 pb-3"},{default:c(()=>[a(R,{color:t.status==="published"?"orange":"green"},{default:c(()=>[P($(t.status==="published"?"mdi-eye-off":"mdi-eye"),1)]),_:2},1032,["color"]),P(" "+$(t.status==="published"?"Unpublish":"Publish"),1)]),_:2},1032,["onClick"]),a(i,{class:"cursor-pointer d-flex gap-3",onClick:E=>O(t)},{default:c(()=>[a(R,{color:"error"},{default:c(()=>[...y[6]||(y[6]=[P("mdi-delete-outline",-1)])]),_:1}),P(" "+$(_.$t("delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["dir","items-per-page","headers","items-length","items","loading"]),k.value.length>0?(C(),Q(q,{key:0,class:"header-button",onClick:F,color:"#B71C1C",flat:"",inset:"",text:`Delete ${k.value.length} selected`},null,8,["text"])):T("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])],8,je)],64)}}},ct=ie(at,[["__scopeId","data-v-5999ce48"]]);export{ct as default};
